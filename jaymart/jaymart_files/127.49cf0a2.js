/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{108:function(e,t,n){"use strict";n.r(t),n.d(t,"addListener",(function(){return s})),n.d(t,"call",(function(){return v})),n.d(t,"createEvent",(function(){return d})),n.d(t,"dispatch",(function(){return j})),n.d(t,"postMessage",(function(){return p})),n.d(t,"removeListener",(function(){return u}));var r=n(7),o=n(34),c=n(12),l=n(19),f=n(13);function d(e){return new CustomEvent(r.i,{detail:e})}!function(){if("function"!=typeof window.CustomEvent){function e(e,t){var i=t||{},n=i.bubbles,r=void 0!==n&&n,a=i.cancelable,o=void 0!==a&&a,c=i.detail,l=void 0===c?void 0:c,f=document.createEvent("CustomEvent");return f.initCustomEvent(e,r,o,l),f}e.prototype=Event.prototype,window.CustomEvent=e}}();var h={},O=!1;function s(e,i){O||(O=!0,window.addEventListener(r.i,(function(e){e&&e.detail&&e.detail.type&&h[e.detail.type]&&h[e.detail.type].forEach((function(t){return t(e)}))}))),h[e]?h[e].push(i):h[e]=[i]}function u(e,t){var i=h[e];if(i&&Array.isArray(i)){var n=i.indexOf(t);n>=0&&i.splice(n,1)}}function j(e){var i={};try{i=JSON.parse(e)}catch(e){throw Object(c.j)(r.f,e.message)}var a=d(i);o.a.debug("[client dispatchEvent to js]",{type:a.type,detail:a.detail}),window.dispatchEvent(a)}function p(e,a,t){void 0===a&&(a={}),void 0===t&&(t="");var n=Object(l.getFeatureToken)();if(!n)throw Object(c.j)(r.d,"Invalid featureToken for client features");if(!window._liff||!window._liff.postMessage)throw Object(c.j)(r.f,"postMessage is not available from client");o.a.debug("[js postMessage to client]",e,t,a),window._liff.postMessage(e,n,t,JSON.stringify(a))}function v(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={once:!0}),Object(l.getFeatureToken)()?(n=Object(f.a)({callbackId:Object(c.v)(12),once:!0},n),new Promise((function(i,r){var a=function(t){if(t&&t.detail){var c=t.detail.callbackId===n.callbackId,l="string"!=typeof t.detail.callbackId;(c||l)&&(n.once&&u(e,a),o.a.debug("[callback detail]",t.detail),t.detail.error?r(t.detail.error):t.detail.data?i(t.detail.data):r(t.detail))}r()};s(e,a),p(e,t,n.callbackId)}))):Promise.reject(Object(c.j)(r.d,"Invalid featureToken for client features"))}},153:function(e,t,n){"use strict";function r(){return"2.18.1"}n.r(t),n.d(t,"getVersion",(function(){return r}))},239:function(e,t,n){"use strict";n.r(t),n.d(t,"closeWindow",(function(){return f}));var r=n(12),o=n(62),c=n(71),l=n(108);function f(){var e=Object(c.getLineVersion)();null!==e&&("ios"===Object(o.getOS)()&&Object(r.e)(e,"9.19")>=0||"android"===Object(o.getOS)()&&Object(r.e)(e,"11.6.0")>=0)?location.href="liff://close":window._liff&&window._liff.postMessage?null!==e&&Object(r.e)(e,"10.15.0")>=0?"ios"===Object(o.getOS)()?window._liff.postMessage("closeWindow",""):window._liff.postMessage("closeWindow","","",""):Object(l.call)("closeWindow"):window.close()}},302:function(e,t,n){"use strict";n.r(t),n.d(t,"logout",(function(){return o}));var r=n(19);function o(){Object(r.clean)()}},303:function(e,t,n){"use strict";n.r(t),n.d(t,"getProfile",(function(){return o}));var r=n(30);function o(){return Object(r.a)(Object(r.b)("profile"))}},304:function(e,t,n){"use strict";n.r(t),n.d(t,"AnalyticsModule",(function(){return g})),n.d(t,"sendShareTargetPicker",(function(){return b}));var r=n(13),o=n(7),c=n(34),l=n(12),f=n(19),d=n(153),h=n(64),O=n(303);function p(){return Object(r.b)(this,void 0,void 0,(function(){var e,i;return Object(r.d)(this,(function(t){switch(t.label){case 0:if(!Object(h.isLoggedIn)())return[3,6];t.label=1;case 1:return t.trys.push([1,5,,6]),(e=Object(f.getDecodedIDToken)())&&e.sub?[2,e.sub]:[3,2];case 2:return[4,Object(O.getProfile)()];case 3:if((i=t.sent())&&i.userId)return[2,i.userId];t.label=4;case 4:return[3,6];case 5:return t.sent(),c.a.debug("can't retrieve Mid/Uid because of something wrong"),[3,6];case 6:return[2]}}))}))}function j(){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(t){switch(t.label){case 0:return[4,p()];case 1:return(e=t.sent())&&"u"===e.substring(0,1)?[2,e]:[2]}}))}))}var g=function(){function e(){this.utsExtra={isLiffSuccessful:!1,isLoggedIn:!1,id:"",version:""},this.injected=!1}return Object.defineProperty(e,"CUSTOMPLACEID_INIT",{get:function(){return"liff.init"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"CUSTOMTYPE",{get:function(){return"liffSdk"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"GENERAL_UTS_ID",{get:function(){return"liff_general"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"GENERAL_APP_NAME",{get:function(){return"LIFF General"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"LiffUtsLoginStatus",{get:function(){return{isLoggedIn:1,isLiffSuccessful:2}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return"analytics"},enumerable:!1,configurable:!0}),e.prototype.install=function(e){var t=e.addHooks,i=e.liff;this.liffCore=i,t({beforeInitFinished:this.beforeInitFinished.bind(this),beforeInitSuccess:this.beforeInitSuccess.bind(this),initError:this.initError.bind(this)})},e.prototype.changeRatioToUTSFormat=function(e){if(e&&Number.isFinite(e))return Math.round(100*e)},e.prototype.setExtra=function(){var t=this.utsExtra,n=t.isLiffSuccessful,i=t.isLoggedIn,s=t.id,r=t.version,o=(i?e.LiffUtsLoginStatus.isLoggedIn:0)|(n?e.LiffUtsLoginStatus.isLiffSuccessful:0);this.uts.setExtra("liff",{id:s,loginStatus:o,version:r})},e.prototype.assignUtsExtra=function(e){Object.assign(this.utsExtra,e)},e.prototype.setVersion=function(e){this.assignUtsExtra({version:e}),c.a.debug("[LIFFUTS][SDK version] "+e),this.setExtra()},e.prototype.setLiffId=function(e){this.assignUtsExtra({id:e}),c.a.debug("[LIFFUTS][LIFFID] "+e),this.setExtra()},e.prototype.setIsLoggedIn=function(e){this.assignUtsExtra({isLoggedIn:e}),c.a.debug("[LIFFUTS][isLoggedIn] "+e),this.setExtra()},e.prototype.sendLiffInit=function(){c.a.debug("[LIFFUTS][sendCustom] liff.init"),this.uts.sendCustom({type:e.CUSTOMTYPE,params:{placeId:e.CUSTOMPLACEID_INIT}})},e.prototype.setIsLiffSuccessful=function(e){this.assignUtsExtra({isLiffSuccessful:e}),c.a.debug("[LIFFUTS][isLiffInitSuccessful] "+e),this.setExtra()},e.prototype.prepareReferrer=function(e){var t={};Object.keys(e).forEach((function(i){if(o.A.includes(i)){var n=e[i];"string"==typeof n&&n&&(t[i.replace(/^liff\.ref\./,"")]=n)}})),Object.keys(t).length>0&&(this.referrer=t)},e.prototype.beforeInitFinished=function(){return Object(r.b)(this,void 0,void 0,(function(){var t,s,n,p,g,b,o,O,v,w,I,m,C;return Object(r.d)(this,(function(T){switch(T.label){case 0:if(t=l.u.parse(window.location.search),this.prepareReferrer(t),s=Object(f.getContext)(),!(n=null==s?void 0:s.utsTracking))return[2];if("auto"!==(p=n.mode)&&"force"!==p)return[3,6];c.a.debug("[LIFFUTS] "+(new Date).toUTCString()),g=Object(f.getConfig)(),b=g.liffId,o=g.analytics,T.label=1;case 1:return T.trys.push([1,3,,4]),O=this,[4,new Promise((function(e,t){var i=window.uts,s=document.createElement("script");s.type="text/javascript",s.src="https://static.line-scdn.net/uts/edge/4.1.0/uts.js",s.onload=function(){var t=window.uts;e(t),window.uts=i},s.onerror=function(e){t(e)},document.getElementsByTagName("head")[0].appendChild(s)}))];case 2:return O.uts=T.sent(),[3,4];case 3:return v=T.sent(),c.a.debug("[LIFFUTS] cannot load UTS, reason: "+v),[2];case 4:return w=void 0,I=void 0,"force"===p?(w={utsId:e.GENERAL_UTS_ID,appName:e.GENERAL_APP_NAME,appEnv:"release"},I={endpoint:"https://uts-front.line-apps.com",sampleRate:this.changeRatioToUTSFormat(n.sendRatio),version:"current"}):(w=Object(r.a)(Object(r.a)({},null==o?void 0:o.context),{utsId:(null==o?void 0:o.context.utsId)||e.GENERAL_UTS_ID,appName:(null==o?void 0:o.context.appName)||e.GENERAL_APP_NAME,appEnv:(null==o?void 0:o.context.appEnv)||"release"}),I=Object(r.a)(Object(r.a)({endpoint:"https://uts-front.line-apps.com"},null==o?void 0:o.options),{sampleRate:this.changeRatioToUTSFormat(n.sendRatio),version:"current"})),this.uts.init(w,I),[4,j()];case 5:(m=T.sent())&&(c.a.debug("[LIFFUTS][mid] "+m),this.uts.setMid(m)),(null==s?void 0:s.tid)&&(c.a.debug("[LIFFUTS][tid] "+s.tid),this.uts.setTid(s.tid)),this.referrer&&(c.a.debug("liff.ref.referrer",this.referrer),this.uts.setSessionParams(this.referrer)),b&&this.setLiffId(b),this.setIsLoggedIn(Object(h.isLoggedIn)()),this.setVersion(Object(d.getVersion)()),C=Object(l.w)(location.href),c.a.debug("[LIFFUTS][url] "+C),this.uts.setUrl(C),this.liffCore.analytics=this.uts,this.injected=!0,T.label=6;case 6:return[2]}}))}))},e.prototype.beforeInitSuccess=function(){this.injected&&(this.setIsLiffSuccessful(!0),this.sendLiffInit())},e.prototype.initError=function(){this.injected&&(this.setIsLiffSuccessful(!1),this.sendLiffInit())},e}(),b=function(e){c.a.debug("[LIFFUTS][sendCustom] liff.shareTargetPicker"),e.sendCustom({type:"liffSdk",params:{placeId:"liff.shareTargetPicker"}})}},33:function(e,t,n){"use strict";n.r(t),n.d(t,"_cleanupCachedIsInClient",(function(){return c})),n.d(t,"isInClient",(function(){return i}));var r=n(7),o=n(12),s=null;function i(){return null===s&&(s=Object(o.q)()||Object(o.r)()&&/[#|&]access_token=/.test(location.hash)||"1"===sessionStorage.getItem(r.m+":"+r.o),sessionStorage.setItem(r.m+":"+r.o,s?"1":"0")),!!s}function c(){s=null}},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,o,c=n(13);(o=r||(r={}))[o.DEBUG=1]="DEBUG",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR";var l=new(function(){function e(e){void 0===e&&(e=r.INFO),this.logLevel=e,this._debug=console.debug,this._info=console.info,this._warn=console.warn,this._error=console.error}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<=r.DEBUG&&(e.unshift("[DEBUG]"),this._debug.apply(this,Object(c.h)(e)))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<=r.INFO&&(e.unshift("[INFO]"),this._info.apply(this,Object(c.h)(e)))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<=r.WARN&&(e.unshift("[WARN]"),this._warn.apply(this,Object(c.h)(e)))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<=r.ERROR&&(e.unshift("[ERROR]"),this._error.apply(this,Object(c.h)(e)))},e}())(Number("3"))},62:function(e,t,n){"use strict";var r;function i(){if(!r){var i=window.navigator.userAgent.toLowerCase();r=/iphone|ipad|ipod/.test(i)?"ios":/android/.test(i)?"android":"web"}return r}function o(){r=void 0}n.r(t),n.d(t,"_cleanupCachedOS",(function(){return o})),n.d(t,"getOS",(function(){return i}))},64:function(e,t,n){"use strict";n.r(t),n.d(t,"isLoggedIn",(function(){return o}));var r=n(19);function o(){return!!Object(r.getAccessToken)()}},7:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return i})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return j})),n.d(t,"j",(function(){return m})),n.d(t,"k",(function(){return s})),n.d(t,"l",(function(){return A})),n.d(t,"m",(function(){return v})),n.d(t,"n",(function(){return w})),n.d(t,"o",(function(){return I})),n.d(t,"p",(function(){return S})),n.d(t,"q",(function(){return p})),n.d(t,"r",(function(){return _})),n.d(t,"s",(function(){return L})),n.d(t,"t",(function(){return E})),n.d(t,"u",(function(){return F})),n.d(t,"v",(function(){return T})),n.d(t,"w",(function(){return k})),n.d(t,"x",(function(){return y})),n.d(t,"y",(function(){return o})),n.d(t,"z",(function(){return r})),n.d(t,"A",(function(){return C}));var r="UNKNOWN",o="UNAUTHORIZED",i="INVALID_ARGUMENT",c="INIT_FAILED",l="FORBIDDEN",f="INVALID_CONFIG",d="INVALID_ID_TOKEN",h="CREATE_SUBWINDOW_FAILED",O="EXCEPTION_IN_SUBWINDOW",j="liffEvent",v="LIFF_STORE",s="https://liff.line.me/",w={ACCESS_TOKEN:"accessToken",ID_TOKEN:"IDToken",DECODED_ID_TOKEN:"decodedIDToken",FEATURE_TOKEN:"featureToken",LOGIN_TMP:"loginTmp",CONFIG:"config",CONTEXT:"context",EXPIRES:"expires",RAW_CONTEXT:"rawContext",CLIENT_ID:"clientId",IS_SUBSEQUENT_LIFF_APP:"isSubsequentLiffApp",MST_CHALLENGE:"mstChallenge",MSIT:"msit",MST:"mst",MST_VERIFIER:"mstVerifier",APP_DATA:"appData",AUTOLOGIN_ATTEMPT:"autologinAttempt"},I="isInClient",a=["context_token","feature_token","access_token","id_token","client_id","mst_verifier","mst_challenge","msit"],m=5,C=["liff.ref.source","liff.ref.medium","liff.ref.campaign","liff.ref.term","liff.ref.content"],T="liff://subwindow",S="cancel",y="submit",p="close",_="error",k=100,L=100,F="liff.subwindow",E="healthCheck",A=["profile","chat_message.write","openid","email"]},71:function(e,t,n){"use strict";function r(){var e=navigator.userAgent.match(/Line\/\d+(\.\d+)*/i);return e?e[0].slice(5):null}n.r(t),n.d(t,"getLineVersion",(function(){return r}))},761:function(e,t,n){"use strict";n.r(t),n.d(t,"LoginModule",(function(){return s}));var r=n(7),o=n(34),c=n(12),l=n(19),f=n(30),d=n(153),h=n(81),O=n(33),j=n(496),v=n.n(j),s=function(){function s(i){this.driver=i}return Object.defineProperty(s.prototype,"name",{get:function(){return"login"},enumerable:!1,configurable:!0}),s.prototype.install=function(){return this.login.bind(this)},s.prototype.login=function(s){this.driver.runSyncHook("beforeLogin",s);var u=Object(c.v)(43),g=Object(c.n)(v()(u)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),e=Object(l.getConfig)();if(!e||!e.liffId)throw Object(c.j)(r.g,"You need to define `liffId` for liff.login()");var t={app_id:e.liffId,state:Object(c.v)(12),response_type:"code",code_challenge_method:"S256",code_challenge:g,liff_sdk_version:Object(d.getVersion)()};s&&s.redirectUri&&(t.redirect_uri=s.redirectUri),Object(h.isSubWindow)()&&!Object(O.isInClient)()&&(t.disable_auto_login="true"),Object(l.setLoginTmp)({codeVerifier:u});var n=Object(f.b)("authorize")+"?"+c.u.stringify(t);o.a.debug("[Redirect] "+n),window.location.href=n},s}()},762:function(e,t,n){"use strict";function r(){return navigator.language}n.r(t),n.d(t,"getLanguage",(function(){return r}))},765:function(e,t,n){"use strict";n.r(t),n.d(t,"getFriendship",(function(){return o}));var r=n(30);function o(){return Object(r.a)(Object(r.b)("friendship"))}},770:function(e,t,n){"use strict";n.r(t),n.d(t,"InitModule",(function(){return Z}));var r=n(13),o=n(12),c=n(301),l=n(64),f=n(19),d=n(7),h=n(62),O=n(71);function j(){return function(){return e=this,t=void 0,r=function(){return function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(e){switch(e.label){case 0:return[3,2];case 1:return[2,e.sent().default];case 2:return[2,new Promise((function(e,t){var n,r=document.createElement("script"),i="ios"===Object(h.getOS)()?(n=Object(O.getLineVersion)())&&Object(o.e)(n,"9.19.0")<0?"https://static.line-scdn.net/liff/edge/2/ios-918-extensions.js":"https://static.line-scdn.net/liff/edge/2/ios-extensions.js":"https://static.line-scdn.net/liff/edge/2/non-ios-extensions.js";r.onload=function(){var n=window.liffClientExtension;n?e(n):t(Object(o.j)(d.e,"Unable to load client features. (Extension is empty)"))},r.onerror=function(){t(Object(o.j)(d.e,"Unable to load client features."))},r.src=i,r.type="text/javascript",document.body.appendChild(r)}))]}}))},new((n=void 0)||(n=Promise))((function(o,i){function c(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,s)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r}()}var v=n(33),w=n(302),I=n(81),m=n(53),C=n(30),T=n(34),S=n(108),y=n(82),_={iconColor:"#111111",statusBarColor:"BLACK",titleTextColor:"#111111",titleSubtextColor:"#B7B7B7",titleButtonColor:"#111111",titleBackgroundColor:"#FFFFFF",progressBarColor:"#06C755",progressBackgroundColor:"#FFFFFF",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#FFFFFF",baseTextColor:"#000000",lightButtonBorderColor:"rgba(0, 0, 0, 0.15)"},k={iconColor:"#FFFFFF",statusBarColor:"WHITE",titleTextColor:"#FFFFFF",titleSubtextColor:"#949494",titleButtonColor:"#FFFFFF",titleBackgroundColor:"#111111",progressBarColor:"#06C755",progressBackgroundColor:"#111111",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#000000",baseTextColor:"#FFFFFF",lightButtonBorderColor:"rgba(255, 255, 255, 0.5)"};function L(e){var t=Object(f.getContext)(),n=(null==t?void 0:t.menuColorSetting)||{adaptableColorSchemes:["light"],lightModeColor:_,darkModeColor:k},o=n.adaptableColorSchemes,i=n.lightModeColor,a=n.darkModeColor,s=o.includes("dark");e.matches&&s?F(Object(r.a)(Object(r.a)({},k),a)):F(Object(r.a)(Object(r.a)({},_),i))}function F(e){var t=e.iconColor,n=e.statusBarColor,r=e.titleTextColor,a=e.titleSubtextColor,s=e.titleButtonColor,c=e.titleBackgroundColor,l=e.progressBarColor,u=e.progressBackgroundColor,f=e.titleButtonAreaBackgroundColor,d=e.titleButtonAreaBorderColor,h=e.baseBackgroundColor,p=e.baseTextColor,O=e.lightButtonBorderColor;E("--liff-base-background-color",h),E("--liff-base-text-color",p),E("--liff-base-background-rgb-color",Object(o.h)(h)),E("--liff-base-text-rgb-color",Object(o.h)(p)),E("--liff-light-button-border-color",O),E("--liff-title-text-color",r),E("--liff-title-background-color",c),E("--liff-title-button-color",s),E("--liff-icon-color",t),E("--liff-status-bar-color",n),E("--liff-title-subtext-color",a),E("--liff-progress-bar-color",l),E("--liff-progress-background-color",u),E("--liff-title-button-area-background-color",Object(o.f)(f)),E("--liff-title-button-area-border-color",Object(o.f)(d))}function E(e,t){document.documentElement.style.setProperty(e,t)}function A(e){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(t){switch(t.label){case 0:return[4,j()];case 1:return t.sent().install(e),[2]}}))}))}function x(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return[4,Object(C.a)(Object(C.b)("certs"))];case 1:return[2,e.sent()]}}))}))}function N(e,t,n){return Object(r.b)(this,void 0,void 0,(function(){var o;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"])];case 1:return o=r.sent(),[4,crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},o,n,t)];case 2:return[2,r.sent()]}}))}))}function D(e,t){return Object(r.b)(this,void 0,void 0,(function(){var n,i,c,u,l,f,h,p,O,j,v,g,b,w,I,m;return Object(r.d)(this,(function(C){switch(C.label){case 0:return n=e.split("."),i=Object(r.f)(n,3),c=i[0],u=i[1],l=i[2],f=JSON.parse(o.d.decode(c)),h=JSON.parse(o.d.decodeUnicode(u)),p=Object(o.g)(o.d.decode(l)),O=Object(o.g)(c+"."+u),[4,x()];case 1:if(j=C.sent(),!(v=j.keys.find((function(e){return e.kid===f.kid}))))return[3,6];if(delete v.alg,"ES256"!==f.alg)throw Object(o.j)(d.h,'Invalid "alg" value in ID_TOKEN');g=void 0,C.label=2;case 2:return C.trys.push([2,4,,5]),[4,N(v,O,p)];case 3:return g=C.sent(),[3,5];case 4:throw b=C.sent(),Object(o.j)(d.h,"Failed to use Crypto API to verify ID_TOKEN: "+b);case 5:if(g){if(w="https://access.line.me"!==h.iss,I=h.aud!==t,m=1e3*h.exp<Date.now(),w)throw Object(o.j)(d.h,'Invalid "iss" value in ID_TOKEN');if(I)throw Object(o.j)(d.h,'Invalid "aud" value in ID_TOKEN');if(m)throw Object(o.j)(d.h,'Invalid "exp" value in ID_TOKEN');return[2,h]}throw Object(o.j)(d.h,"Invalid signature in ID_TOKEN");case 6:throw Object(o.j)(d.h,'Invalid "kid" value in ID_TOKEN');case 7:return[2]}}))}))}function U(e){var t=e.split(".");if(t[1])try{var n=t[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(window.atob(n))}catch(e){return null}return null}function B(e){var t=e.pathname,n=e.query,r="liff://"+t+(n?"?"+o.u.stringify(n):"");location.href=r}var P=null;function M(){return Boolean(P)}function R(e,t){return Object(r.b)(this,void 0,void 0,(function(){var n;return Object(r.d)(this,(function(r){switch(r.label){case 0:return(n=Object(f.getMST)())?[2,n]:e&&t?[4,Object(m.getMSTByMSIT)({msit:e,mstVerifier:t})]:[3,2];case 1:return[2,r.sent().mst];case 2:return[2,null]}}))}))}function W(e){return Object(C.a)(Object(C.b)("apps")+"/"+e+"/featureToken")}function V(e){return Object(r.b)(this,void 0,void 0,(function(){var t,n,c,i;return Object(r.d)(this,(function(r){switch(r.label){case 0:return t=o.u.parse(window.location.hash),n=Object(o.t)({access_token:Object(f.getAccessToken)(),context_token:Object(f.getRawContext)(),feature_token:Object(f.getFeatureToken)(),id_token:Object(f.getIDToken)(),client_id:Object(f.getClientId)(),mst_challenge:Object(f.getMSTChallenge)(),mst_verifier:Object(f.getMSTVerifier)(),msit:Object(f.getMSIT)()},t),M()?Object(l.isLoggedIn)()?[4,W(e)]:[3,2]:[3,3];case 1:c=r.sent().featureToken,n.feature_token||(n.feature_token=c),r.label=2;case 2:(i=Object(o.k)(e))&&(n.client_id=i),r.label=3;case 3:return[2,n]}}))}))}function K(e){if(e.persisted&&Object(y.isApiAvailable)("multipleLiffTransition"))if("ios"===Object(h.getOS)())window.location.reload();else{var t=Object(f.getConfig)().liffId,n=Object(f.getFeatureToken)();if(!t)throw Object(o.j)(d.e,"Invalid LIFF ID.");if(!n)throw Object(o.j)(d.d,"Invalid featureToken for client features");B({pathname:"app/"+t,query:{feature_token:n}})}}function G(e,t){return Object(r.b)(this,void 0,void 0,(function(){var n,c;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,Object(C.d)(e)];case 1:return n=r.sent().client_id,c=Object(o.k)(t),[2,n===c]}}))}))}function H(e,t){return Object(r.b)(this,void 0,void 0,(function(){var n,c,i,s,h,u,j,w,p,C,_,g,b;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(e){var t=Object(O.getLineVersion)();if(!t||Object(o.e)(t,"9.5.0")<0)e();else if(window._liff&&window._liff.features)e();else{T.a.debug("cannot find window._liff.features, listen to ready event");var n=function(){T.a.debug("ready event is fired"),Object(S.removeListener)("ready",n),e()};Object(S.addListener)("ready",n)}}))];case 1:return r.sent(),"boolean"==typeof P&&T.a.warn("liff.init is not expected to be called more than once"),P=!!Object(f.getIsSubsequentLiffApp)()||!(!Object(v.isInClient)()||o.u.parse(window.location.hash).feature_token||Object(f.getFeatureToken)())&&(Object(f.setIsSubsequentLiffApp)(!0),!0),[4,V(t.liffId)];case 2:return n=r.sent(),c=n.access_token,i=n.context_token,s=n.feature_token,h=n.id_token,u=n.client_id,j=n.mst_verifier,w=n.mst_challenge,p=n.msit,i&&Object(f.setContext)(U(i)),!Object(I.isSubWindow)()&&s&&(function(e,t){Object(y.isApiAvailable)("multipleLiffTransition")&&B({pathname:"app/"+e,query:{feature_token:t}})}(t.liffId,s),M()&&Object(f.setFeatureToken)(s)),w&&Object(f.setMSTChallenge)(w),j&&Object(f.setMSTVerifier)(j),u&&Object(f.setClientId)(u),p&&Object(f.setMSIT)(p),window.addEventListener("pageshow",K),Object(l.isLoggedIn)()?[3,7]:s&&c?[3,5]:M()?(C=Object(o.c)(location.href,{"liff.hback":"2"}),e.login({redirectUri:C}),[4,new Promise((function(){}))]):[3,4];case 3:r.sent(),r.label=4;case 4:throw e.login(),Object(o.j)(d.e,"Failed to parse feature_token or access_token");case 5:return[4,G(c,t.liffId)];case 6:if(!r.sent())throw e.login(),Object(o.j)(d.e,"Failed to verify access_token");Object(f.setFeatureToken)(s),Object(f.setAccessToken)(c),r.label=7;case 7:return[4,R(p,j)];case 8:return(_=r.sent())?(Object(f.setMST)(_),[4,Object(m.getAppData)({mst:_})]):[3,10];case 9:(g=r.sent().data)&&Object(f.setAppData)(JSON.stringify(g)),r.label=10;case 10:return h&&!Object(f.getIDToken)()&&Object(f.setIDToken)(h),h&&u&&!Object(f.getDecodedIDToken)()?[4,D(h,u)]:[3,12];case 11:(b=r.sent())&&Object(f.setDecodedIDToken)(b),r.label=12;case 12:return[2]}}))}))}function J(e){return Object(r.b)(this,void 0,void 0,(function(){var t,n,c,i,s,l,h;return Object(r.d)(this,(function(r){switch(r.label){case 0:return t=Object(C.b)("apps"),n=t+"/"+e+"/contextToken",c=Object(f.getAccessToken)(),i={"Content-Type":"application/json",Accept:"application/json"},c&&(i.Authorization="Bearer "+c),[4,Object(C.a)(n,{headers:i})];case 1:if(s=r.sent(),!(l=s.contextToken))throw Object(o.j)(d.e,"Can not get context from server.");if(!(h=U(l)))throw Object(o.j)(d.e,"Invalid context token.");return[2,h]}}))}))}function Y(){return Object(r.b)(this,void 0,void 0,(function(){var e,t;return Object(r.d)(this,(function(n){switch(n.label){case 0:if(!(e=Object(f.getConfig)().liffId))throw Object(o.j)(d.e,"Invalid LIFF ID.");return[4,J(e)];case 1:return t=n.sent(),Object(f.setContext)(t),[2]}}))}))}function z(e){return Object(r.b)(this,void 0,void 0,(function(){var t,n,i,a=this;return Object(r.d)(this,(function(s){switch(s.label){case 0:t=function(){return Object(r.b)(a,void 0,void 0,(function(){var t,n,c,i,a,s;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,(l=Object(f.getConfig)(),d=o.u.parse(window.location.search),h=Object(f.getLoginTmp)(),O={grant_type:"authorization_code",client_id:d.liffClientId,appId:l.liffId,code:d.code,code_verifier:h.codeVerifier,redirect_uri:l.redirectUri||d.liffRedirectUri,id_token_key_type:"JWK"},j=o.u.stringify(O),Object(C.a)(Object(C.b)("token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:j}))];case 1:return t=r.sent(),n=t.access_token,c=t.id_token,i=t.expires_in,Object(f.setClientId)(e),Object(f.setAccessToken)(n),Object(f.setExpireTime)(new Date(Date.now()+1e3*i)),Object(f.removeLoginTmp)(),c?(Object(f.setIDToken)(c),[4,D(c,e)]):[3,3];case 2:(a=r.sent())&&Object(f.setDecodedIDToken)(a),r.label=3;case 3:return(s=o.u.parse(location.hash).context_token)?(Object(f.setContext)(U(s)),[3,6]):[3,4];case 4:return[4,Y()];case 5:r.sent(),r.label=6;case 6:return[2]}var l,d,h,O,j}))}))},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,t()];case 2:return s.sent(),[3,4];case 3:throw n=s.sent(),i=n,Object(f.removeLoginTmp)(),i;case 4:return[2]}}))}))}var X=new(function(){function e(){var e=this;this.getAndValidateContext=function(){var e=Object(f.getContext)();if(!e)throw Object(o.j)(d.e,"Could not get Context from server.");if(!e.endpointUrl)throw Object(o.j)(d.e,"Could not get endpointUrl from server.");if(!e.permanentLinkPattern)throw Object(o.j)(d.e,"Could not get permanentLinkPattern from server.");return e},this.decodeState=function(t){var n=e.getAndValidateContext();t=t.replace(/\n/g,"%0D%0A");var r=!n.endpointUrl.startsWith("/?")&&n.endpointUrl.includes("/?")||!n.endpointUrl.startsWith("/#")&&n.endpointUrl.includes("/#")||n.endpointUrl.endsWith("/")||!t.startsWith("/?")&&t.includes("/?")||!t.startsWith("/#")&&t.includes("/#")||t.endsWith("/"),o=new URL(n.endpointUrl),i=o.origin,a=o.pathname,s=o.search,c=new URL(""+i+e.attachSlashAtStart(t)),l=c.pathname,u=c.search,f=c.hash,d=""+s+(s?u.replace(/\?/g,"&"):u),h=(""+a+e.attachSlashAtStart(l)).replace("//","/");return(h=e.attachSlashAtStart(""+h)).endsWith("/")&&!r&&(h=h.substring(0,h.length-1)),(""+i+h+d+f).replace(/%0D%0A/g,"\n")}}return e.prototype.attachSlashAtStart=function(e){return(e&&e.length>0&&!e.startsWith("/")?"/":"")+e},e.prototype.invoke=function(){return Object(r.b)(this,void 0,void 0,(function(){var e,t,n,c,i;return Object(r.d)(this,(function(r){switch(r.label){case 0:if(e=o.u.parse(window.location.search),"string"!=typeof(t=e["liff.state"]))return[2];r.label=1;case 1:return r.trys.push([1,4,,5]),n=location.href,(c=this.decodeState(t))===n?[3,3]:(e["liff.hback"]?location.replace(Object(o.c)(c,{"liff.hback":e["liff.hback"]})):location.replace(c),[4,new Promise((function(){}))]);case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if((i=r.sent()).code===d.e)throw i;return T.a.debug(i),[3,5];case 5:return[2]}}))}))},e}());function Q(e,t,n){return Object(r.b)(this,void 0,void 0,(function(){var c;return Object(r.d)(this,(function(r){switch(r.label){case 0:if(!n.liffId)throw Object(o.j)(d.g,"liffId is necessary for liff.init()");return Object(f.setConfig)(n),!Object(v.isInClient)()&&Object(l.isLoggedIn)()&&(Object(f.getExpireTime)()||Object(w.logout)()),c=o.u.parse(window.location.search),!Object(I.isSubWindow)()||Object(v.isInClient)()?[3,2]:[4,new Promise((function(e){Object(m.getMainWindowOrigin)()?e():window.addEventListener("message",(function t(n){var r=n.data,o=n.source,i=n.origin;if(r){var a=r.type,s=r.message;a===d.t&&(window.removeEventListener("message",t),s&&Object(f.setAppData)(s),Object(m.setMainWindowOrigin)(i),o&&o.postMessage&&o.postMessage({status:d.t},i),e())}}))}))];case 1:r.sent(),r.label=2;case 2:if(c.error&&c.liffOAuth2Error)throw h=c.error,O=c.error_description.replace(/\+/g," "),Object(o.j)(d.e,h+": "+O);return i=c.code,s=Object(f.getLoginTmp)(),Boolean(i&&!Object(l.isLoggedIn)()&&s&&s.codeVerifier)?[4,z(c.liffClientId)]:[3,4];case 3:r.sent(),r.label=4;case 4:return Object(v.isInClient)()?[4,H(e,n)]:[3,6];case 5:return r.sent(),[3,8];case 6:return Object(l.isLoggedIn)()?[3,8]:[4,Y()];case 7:r.sent(),r.label=8;case 8:return[4,X.invoke()];case 9:return r.sent(),[4,t.runHook("beforeInitFinished")];case 10:return r.sent(),Object(o.x)(window.location.href),[2]}var i,s,h,O}))}))}var Z=function(){function e(e){this.moduleDriver=e}return Object.defineProperty(e.prototype,"name",{get:function(){return"init"},enumerable:!1,configurable:!0}),e.prototype.install=function(e){var t=e.liff;return this.liff=t,this.init.bind(this)},e.prototype.init=function(e,t,n){return Object(r.b)(this,void 0,void 0,(function(){var h;return Object(r.d)(this,(function(r){switch(r.label){case 0:i=this.liff,window&&!window.liff&&(window.liff=i),r.label=1;case 1:return r.trys.push([1,9,,11]),[4,Promise.all([A(this.liff),Q(this.liff,this.moduleDriver,e)])];case 2:return r.sent(),function(){var e;E("color-scheme",((null==(e=Object(f.getContext)())?void 0:e.menuColorSetting)||{adaptableColorSchemes:["light"]}).adaptableColorSchemes.join(" "));var t=window.matchMedia("(prefers-color-scheme: dark)");L({matches:null==t?void 0:t.matches,media:null==t?void 0:t.media}),t.addEventListener?t.addEventListener("change",L):t.addListener&&t.addListener(L)}(),[4,this.moduleDriver.runHook("beforeInitSuccess")];case 3:if(r.sent(),!e.withLoginOnExternalBrowser||Object(l.isLoggedIn)())return[3,7];if(!Object(f.getAutologinAttempt)())return[3,4];throw Object(o.j)(d.e,"Auto login failure");case 4:return Object(f.setAutologinAttempt)(),this.liff.login(),[4,new Promise((function(){}))];case 5:r.sent(),r.label=6;case 6:return[3,8];case 7:e.withLoginOnExternalBrowser&&Object(f.clearAutologinAttempt)(),r.label=8;case 8:return"function"==typeof t&&t(),Object(c.done)(),[3,11];case 9:return h=r.sent(),[4,this.moduleDriver.runHook("initError",h)];case 10:throw r.sent(),"function"==typeof n&&n(h),h;case 11:return[2]}var i}))}))},e}()},81:function(e,t,n){"use strict";n.r(t),n.d(t,"IsSubWindowModule",(function(){return p})),n.d(t,"isSubWindow",(function(){return d})),n.d(t,"module",(function(){return f}));var r=n(7),o=n(12),c=n(19),l=n(33),u=function(){function e(){}return e.prototype.invoke=function(){return Object(o.s)()},e}(),s=function(){function e(e){this.storage=e}return Object.defineProperty(e,"IN_SUB_WINDOW_KEY",{get:function(){return"inSubWindow"},enumerable:!1,configurable:!0}),e.prototype.invoke=function(){return!!this.getInSubWindow()||!!new URLSearchParams(window.location.search).has(r.u)&&(this.setInSubWindow(!0),!0)},e.prototype.getInSubWindow=function(){var t=this.storage.getItem(r.m+":"+this.getLiffId()+":"+e.IN_SUB_WINDOW_KEY);return null!==t&&JSON.parse(t)},e.prototype.setInSubWindow=function(t){this.storage.setItem(r.m+":"+this.getLiffId()+":"+e.IN_SUB_WINDOW_KEY,String(t))},e.prototype.getLiffId=function(){var e=Object(c.getConfig)().liffId;if(!e)throw Object(o.j)(r.g,"liffId is necessary for liff.init()");return e},e}(),p=function(){function e(){Object(l.isInClient)()?this.impl=new u:this.impl=new s(window.sessionStorage)}return Object.defineProperty(e.prototype,"name",{get:function(){return"isSubWindow"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return this.impl.invoke.bind(this.impl)},e}(),f=new p,d=f.install()},82:function(e,t,n){"use strict";n.r(t),n.d(t,"isApiAvailable",(function(){return v}));var r=n(7),o=n(12),c=n(19),l=n(33),f=n(64),d=n(71),h=["subwindowOpen","shareTargetPicker","multipleLiffTransition","scanCode","scanCodeV2","getAdvertisingId","addToHomeScreen","bluetoothLeFunction","skipChannelVerificationScreen"];function a(e){var t,i=Object(c.getContext)();return null===(t=null==i?void 0:i.availability)||void 0===t?void 0:t[e]}function s(e,t){var n=Object(d.getLineVersion)();return!!n&&!(t&&Object(o.e)(n,t)>0)&&Object(o.e)(n,e)>=0}function O(e){var t=a(e);if(!t)return!1;var i=t.permission,n=t.minVer,r=t.unsupportedFromVer;return!!i&&!!Object(l.isInClient)()&&s(n,r)}var j={shareTargetPicker:function(){if(!Object(f.isLoggedIn)())return!1;var e=a("shareTargetPicker");if(!e)return!1;var t=e.permission,n=e.minVer;if(!t)return!1;if(Object(l.isInClient)()){var r=Object(d.getLineVersion)();return null!==r&&Object(o.e)(r,n)>=0}return!0},multipleLiffTransition:function(){var e=a("multipleLiffTransition");if(!e)return!1;var t=e.permission;return Object(l.isInClient)()&&t},subwindowOpen:function(){var e=a("subwindowOpen");return!(!e||!e.permission)&&(!Object(l.isInClient)()||s(e.minVer,e.unsupportedFromVer))},scanCode:function(){return O("scanCode")},scanCodeV2:function(){var e=a("scanCodeV2");return!(!e||!e.permission)&&(!Object(l.isInClient)()||s(e.minVer))},getAdvertisingId:function(){return O("getAdvertisingId")},addToHomeScreen:function(){return O("addToHomeScreen")},bluetoothLeFunction:function(){return O("bluetoothLeFunction")},skipChannelVerificationScreen:function(){return O("skipChannelVerificationScreen")}};function v(i){if(!h.includes(i))throw Object(o.j)(r.f,"Unexpected API name.");var e=j[i];return!e||e()}}}]);