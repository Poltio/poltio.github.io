(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{826:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var o=r(26),n=r(527);class c extends o.a{constructor(){super(...arguments),this.meta=n.productBrandCategoriesStateMeta}fetch(t){return this.dispatch(new this.meta.actionTypes.GetAfterId("","",{params:{"brand-alias":t}}))}}},828:function(t,e,r){"use strict";r.d(e,"a",(function(){return v}));r(18),r(17),r(16);var o=r(3),n=r(26),c=r(526),l=r(1),d=r(9);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}class v extends n.c{constructor(){super(...arguments),this.meta=c.categoryBrandsStateMeta}get status(){return this.getters[this.meta.getterTypes.status]}get items(){var t;return(null===(t=Object(d.f)(this.state,this.meta.path,{}).data)||void 0===t?void 0:t.items)||{}}fetchCategoryByAlias(t){return this.dispatch(new this.meta.actionTypes.Get({params:m(m(m(m(m(m(m(m({},l.a.ECOMAPIOptions(this.state).params),(null==t?void 0:t.campaign_alias)&&{"campaign-alias":null==t?void 0:t.campaign_alias}),(null==t?void 0:t.category_alias)&&{"category-alias":null==t?void 0:t.category_alias}),(null==t?void 0:t.brand_alias)&&{"brand-alias":null==t?void 0:t.brand_alias}),(null==t?void 0:t.promotion_alias)&&{"promotion-alias":null==t?void 0:t.promotion_alias}),(null==t?void 0:t.flash_sale_alias)&&{"flash-sale-alias":null==t?void 0:t.flash_sale_alias}),(null==t?void 0:t.q)&&{q:null==t?void 0:t.q}),{},{limit:1e3})}))}}},829:function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));r(18),r(17),r(16);var o=r(3),n=r(1);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}class d{}d.getCartProductCategories=(data,t)=>{var e={};return data.title&&(e["item_category".concat(t>1?t:"")]=data.title),data.child&&(t+=1,e=l(l({},e),d.getCartProductCategories(data.child,t))),e},d.getCartProductVariants=data=>{var t="";for(var e of data)e.title&&(t&&(t+="/"),t+=e.title);return t},d.getProductsData=function(t){var e,r,o,c,h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],m=[],v=0;for(var f of t)if(!h||f.is_select){var y={};f.categories&&(y=d.getCartProductCategories(f.categories,1));var _="";f.sku&&f.sku.options.length>0&&(_=d.getCartProductVariants(f.sku.options)),m.push(l(l({item_id:(null===(e=f.sku)||void 0===e?void 0:e.sku)||"",item_name:f.title||"",affiliation:n.a.config.APP_NAME||"",coupon:(null===(r=f.voucher)||void 0===r?void 0:r.title)||"",currency:"THB",discount:parseFloat((null===(o=f.voucher)||void 0===o?void 0:o.unit_voucher_value)||"0"),index:v,item_brand:(null===(c=f.brand)||void 0===c?void 0:c.title)||""},y),{},{item_variant:_,price:parseFloat(f.total_price_before_discount||f.total_price||"0"),quantity:f.quantity})),v+=1}return m},d.getRemoveFromCartEvent=t=>({event:"remove_from_cart",ecommerce:{items:d.getProductsData(t||[])}}),d.getAddPaymentInfoEvent=(data,t)=>{var e=d.getCartDetailWithEvent("add_payment_info",data,!0);return e.ecommerce.payment_type=t,e},d.getCartDetailWithEvent=function(t,data){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=d.getProductsData(data.products||[],e),o=parseFloat(data.total_discount||"0"),n=parseFloat(data.total_cash_voucher||"0"),c=parseFloat(data.total_discount_promotion||"0");return{event:t,ecommerce:{currency:"THB",value:parseFloat(data.total_price_after_discount||"0"),total_discount:o+n+c,total_voucher_discount:o+n,total_promotion_discount:c,items:r}}},d.getOrderVouchers=data=>{var t={},e=1;for(var r of data)r.title&&(t["coupon".concat(e)]=r.title,e+=1);return t},d.getOrderProducts=t=>{var e,r=[],o=0;for(var c of t){var h="",m=0;Array.isArray(c.voucher)?c.voucher&&c.voucher.length>0&&(h=c.voucher[0].title,m=parseFloat(c.voucher[0].discount_amount||"0")):c.voucher&&(h=c.voucher.title,m=parseFloat(c.voucher.discount_amount||"0"));var v={};c.categories&&(v=d.getCartProductCategories(c.categories,1));var f="";c.sku&&c.sku.options.length>0&&(f=d.getCartProductVariants(c.sku.options)),r.push(l(l({item_id:(null===(e=c.sku)||void 0===e?void 0:e.sku)||"",item_name:c.title||"",affiliation:n.a.config.APP_NAME||"",coupon:h,currency:"THB",discount:m,index:o,item_brand:c.brand.title||""},v),{},{item_variant:f,price:parseFloat(c.total_price||"0"),quantity:c.quantity||0})),o+=1}return r},d.getPurchaseEvent=data=>{var t={};data.vouchers&&data.vouchers.length>0&&(t=d.getOrderVouchers(data.vouchers));var e=[];return data.products&&data.products.length>0&&(e=d.getOrderProducts(data.products)),{event:"pam_purchase",ecommerce:l(l({transaction_id:data.order_code,affiliation:n.a.config.APP_NAME||"",value:parseFloat(data.total_price_after_discount||"0"),shipping:parseFloat(data.shipping_fee||"0"),currency:"THB"},t),{},{items:e})}}},830:function(t,e,r){"use strict";r(18),r(17),r(16);var o=r(3),n=r(8),c=r(6),l=r(0),d=r(24),h=r(31),m=r(127),v=r(951),f=r(825),y=r(9),_=r(335),O=r(167),C=r(828),L=r(826),j=r(4),P=r(818),$=r(142);function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function F(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var B=function(t,e,r,desc){var o,n=arguments.length,c=n<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(n<3?o(c):n>3?o(e,r,c):o(e,r))||c);return n>3&&c&&Object.defineProperty(e,r,c),c},k=class extends c.a{created(){Object(P.f)(this.productCategoryLoaderLevel2,"categoryItem",this.onCategoryGetLVL1Success)}mounted(){this.onFetchBrand(),this.$app.route.path.includes("categories")?this.productCategoryLoaderLevel2.resetCategoryList():this.brandCategoryRepo.$clear()}get status(){return this.productCategoryLoaderLevel2.optionStatus}get productCategoryRepo(){return new O.a(this)}get productCategoryLoaderLevel2(){return new f.a(this)}get productCategoryLoaderLevel3(){return new f.a(this)}get categoryBrandRepo(){return new C.a(this)}get formRepo(){return new $.a(this)}get brandCategoryRepo(){return new L.a(this)}onFetchBrand(){var t=arguments,e=this;return Object(n.a)((function*(){var r=t.length>0&&void 0!==t[0]?t[0]:"";e.categoryBrandRepo.fetchCategoryByAlias(F(F(F(F(F({},e.$app.route.path.includes("categories")&&{category_alias:r||e.$app.route.params.id}),e.$app.route.path.includes("promotions")&&{promotion_alias:e.$app.route.params.id}),e.$app.route.path.includes("campaign")&&{campaign_alias:e.$app.route.params.id}),e.$app.route.path.includes("flash-sale")&&{flash_sale_alias:e.$app.route.params.id}),{},{q:e.$app.route.query.q}))}))()}categoryItems(){return this.productCategoryLoaderLevel2.categoryList.items}checkIncludesPathNameWithCategories(){return!!this.$app.route.path.includes("categories")}selectOptionByPathName(){return this.checkIncludesPathNameWithCategories()?h.a.toOptions(h.a.toArray(this.categoryItems()),"tag_id","title"):h.a.toOptions(this.brandCategoryRepo.items,"tag_id","title")}categoriesFilterFields(){return[{type:d.b.SELECT,className:"col-12 col-lg-4 mb-3 mb-lg-0 px-0 pr-lg-3",props:{name:"brand",placeholder:this.$t("product.select_brand"),isSearchable:!1,isLoading:this.categoryBrandRepo.status.isLoading,options:h.a.toOptions(this.categoryBrandRepo.items,"alias","title")},on:{change:option=>{option?this.checkIncludesPathNameWithCategories()?this.productCategoryLoaderLevel2.fetchChild(this.$app.route.params.id):this.brandCategoryRepo.fetch(option.value):(this.resetSubCateLevel2(),this.productCategoryLoaderLevel2.resetCategoryList(),this.productCategoryLoaderLevel3.resetOption(),this.resetOptions())}}},{type:d.b.SELECT,className:"col-12 col-lg-4 mb-3 mb-lg-0 px-0 pr-lg-3",on:{change:option=>{option?(this.productCategoryLoaderLevel3.fetchChild(option.value),this.productCategoryLoaderLevel3.fetchOption(F(F(F(F({category_alias:option.value},this.$app.route.path.includes("promotions")&&{promotion_alias:this.$app.route.params.id}),this.$app.route.path.includes("campaign")&&{campaign_alias:this.$app.route.params.id}),this.$app.route.path.includes("flash-sale")&&{flash_sale_alias:this.$app.route.params.id}),{},{q:this.$app.route.query.q}))):(this.resetOptions(),this.productCategoryLoaderLevel3.resetOption(),this.resetSubCateLevel3())}},props:{name:"sub_category_lvl2",placeholder:this.$t("product.select_category"),isSearchable:!1,isLoading:this.checkIncludesPathNameWithCategories()?this.productCategoryLoaderLevel2.categoryList.isLoading||this.productCategoryRepo.status.isLoading:this.brandCategoryRepo.status.isLoading,defaultValue:this.value.sub_category_lvl2,options:this.selectOptionByPathName()}},{type:d.b.SELECT,className:"col-12 col-lg-4 mb-3 mb-lg-0 px-0 pr-lg-3",on:{change:option=>{option?this.productCategoryLoaderLevel3.fetchOption(F(F(F(F({category_alias:option.value},this.$app.route.path.includes("promotions")&&{promotion_alias:this.$app.route.params.id}),this.$app.route.path.includes("campaign")&&{campaign_alias:this.$app.route.params.id}),this.$app.route.path.includes("flash-sale")&&{flash_sale_alias:this.$app.route.params.id}),{},{q:this.$app.route.query.q})):(this.resetOptions(),this.productCategoryLoaderLevel3.resetOption(),this.resetSubCateLevel3())}},props:{name:"sub_category_lvl3",placeholder:this.$t("product.select_category"),isSearchable:!1,options:h.a.toOptions(this.productCategoryLoaderLevel3.categoryListItems,"tag_id","title")}}]}optionFilterFields(){return this.productCategoryLoaderLevel3.optionItems.map(option=>({type:d.b.SELECT,className:"col-12 col-lg-3 px-0 pr-lg-3 mb-3 mb-lg-0",props:{name:"option.".concat(option.title),placeholder:option.title||this.$t("product.select_category"),defaultValue:Object(y.f)(this.value,"option.".concat(option.title,".value"),null),isSearchable:!1,options:h.a.toOptions(h.a.toArray(option.children),"alias","title",option.title)}}))}get minPriceFilterFields(){return[{type:d.b.TEXT,className:"col",props:{name:"min",className:"text-center",placeholder:"0",isHideAlert:!0,transform:m.a.numberOnly}}]}get maxPriceFilterFields(){return[{type:d.b.TEXT,className:"col",props:{name:"max",className:"text-center",placeholder:"100,000",isHideAlert:!0,transform:m.a.numberOnly}}]}get orderFilterFields(){return[{type:d.b.SELECT,className:"col",props:{name:"order",placeholder:this.$t("product.select_order"),defaultValue:"a_z",isSearchable:!1,options:[{label:this.$t("product.title_asc"),value:"title_asc"},{label:this.$t("product.title_desc"),value:"title_desc"},{label:this.$t("product.price_asc"),value:"price_asc"},{label:this.$t("product.price_desc"),value:"price_desc"}]}}]}isOptionEmpty(){return h.a.isEmpty(this.optionFilterFields())&&!this.status.isLoading}onCategoryGetLVL1Success(t){var e=this;return Object(n.a)((function*(){var r,o,{newValue:n,oldValue:c}=t;Object(j.o)(n.isLoaded,c.isLoaded)&&(null===(o=null===(r=e.productCategoryLoaderLevel2.categoryItem)||void 0===r?void 0:r.data)||void 0===o?void 0:o.parent)&&(yield e.productCategoryRepo.$get(e.productCategoryLoaderLevel2.categoryItem.data.parent.tag_id),e.formRepo.updateAttr(e.form_name,"sub_category_lvl1",e.productCategoryLoaderLevel2.categoryItem.data.parent.tag_id),e.formRepo.updateAttr(e.form_name,"sub_category_lvl2",e.productCategoryLoaderLevel2.categoryItem.data.tag_id)),Object(j.o)(n.isError,c.isError)&&(yield e.productCategoryLoaderLevel2.fetch("",F(F(F(F({},e.$app.route.path.includes("promotions")&&{promotion_alias:e.$app.route.params.id}),e.$app.route.path.includes("campaign")&&{campaign_alias:e.$app.route.params.id}),e.$app.route.path.includes("flash-sale")&&{flash_sale_alias:e.$app.route.params.id}),{},{q:e.$app.route.query.q})))}))()}resetBrand(){this.formRepo.updateAttr(this.form_name,"brand",null)}resetOptions(){this.formRepo.updateAttr(this.form_name,"max",""),this.formRepo.updateAttr(this.form_name,"min",""),this.formRepo.updateAttr(this.form_name,"order",""),this.formRepo.updateAttr(this.form_name,"option",null)}resetSubCateLevel1(){this.formRepo.updateAttr(this.form_name,"sub_category_lvl1",null)}resetSubCateLevel2(){this.formRepo.updateAttr(this.form_name,"sub_category_lvl2",null)}resetSubCateLevel3(){this.formRepo.updateAttr(this.form_name,"sub_category_lvl3",null)}destroyed(){this.formRepo.reset(this.form_name)}onFormChange(t,e){t!==e&&this.$emit("change",t)}};B([Object(l.b)("form_name")],k.prototype,"form_name",void 0),B([Object(l.c)(Object)],k.prototype,"value",void 0),B([_.a],k.prototype,"status",null),B([Object(l.f)("value",{deep:!0})],k.prototype,"onFormChange",null);var R=k=B([v.a,l.a],k),E=r(5),component=Object(E.a)(R,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product-filter-container"},[r("div",{staticClass:"product-filter"},[r("div",{staticClass:"category-filter"},[r("Field",{attrs:{options:t.categoriesFilterFields()},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),r("div",{staticClass:"price-filer"},[r("Field",{attrs:{options:t.minPriceFilterFields},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),r("span",{staticClass:"splitter"},[t._v("-")]),t._v(" "),r("Field",{attrs:{options:t.maxPriceFilterFields},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),r("div",{staticClass:"order-filter"},[r("Field",{attrs:{options:t.orderFilterFields},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),t.isOptionEmpty()?t._e():r("div",{staticClass:"option-filter"},[t.status.isLoading?r("div",{staticClass:"option-loading-container"},t._l(4,(function(t){return r("div",{key:t,staticClass:"option-loading-item"},[r("i",{staticClass:"icon icon-loading spinner"})])})),0):r("Field",{attrs:{className:"option-fields",options:t.optionFilterFields()},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])])}),[],!1,null,"00a2c2fc",null);e.a=component.exports},848:function(t,e,r){"use strict";var o=r(6),n=r(0),c=r(820),l=r(845),d=r(951),h=r(31),m=function(t,e,r,desc){var o,n=arguments.length,c=n<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(n<3?o(c):n>3?o(e,r,c):o(e,r))||c);return n>3&&c&&Object.defineProperty(e,r,c),c},v=class extends o.a{isShow(){return!this.$array.isEmpty(this.bannerLoader.items)||!this.bannerLoader.status.isLoaded}get bannerLoader(){return new l.a(this)}mounted(){this.bannerLoader.fetchByAliasAsync(this.bannerType,this.alias)}bannerItems(){return h.a.isEmpty(this.bannerLoader.items)?this.defaultValue:this.bannerLoader.items}};m([Object(n.c)({type:String,default:""})],v.prototype,"className",void 0),m([Object(n.c)(String)],v.prototype,"bannerType",void 0),m([Object(n.c)({type:Array,default:()=>[]})],v.prototype,"defaultValue",void 0),m([Object(n.c)(String)],v.prototype,"alias",void 0);var f=v=m([d.a,Object(n.a)({components:{Banners:c.a}})],v),y=r(5),component=Object(y.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return this.isShow()?e("Banners",{attrs:{className:this.className,items:this.bannerItems(),status:this.bannerLoader.status}}):this._e()}),[],!1,null,"3b436b23",null);e.a=component.exports},871:function(t,e,r){"use strict";r(18),r(17),r(16);var o=r(3),n=r(8),c=r(6),l=r(0),d=r(820),h=r(851),m=r(830),v=r(83),f=r(334),y=r(338),_=r(842),O=r(819),C=r(167),L=r(951),j=r(848),P=r(844),$=r(335),w=r(1),F=r(829),B=r(56);function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function R(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var E=function(t,e,r,desc){var o,n=arguments.length,c=n<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(n<3?o(c):n>3?o(e,r,c):o(e,r))||c);return n>3&&c&&Object.defineProperty(e,r,c),c},I=class extends c.c{constructor(){super(...arguments),this.footerData=r(339)("./".concat(this.$config.appClient,"/footer.js")).type_c,this.form_name="product_filter"}created(){this.formRepo.init(this.form_name,{max:"",min:"",order:"",brand:"",option:{},sub_category_lvl1:this.$app.route.path.includes("categories")?this.$app.route.params.id:"",sub_category_lvl2:"",sub_category_lvl3:"",tag:this.$app.route.path.includes("tags")?this.$app.route.params.id:""})}mounted(){var t=this;return Object(n.a)((function*(){t.product.$clear(),yield t.product.$fetch("","",{params:R(R(R({},P.a.productFilterToOptions(t.form)),t.$app.route.path.includes("tags")&&{is_slug:!0}),{},{limit:15})}),t.trackViewItemListEvent()}))()}get paymentOption(){var data=this.footerData.footerPaymentOption;return data=data.map(p=>(p.title=this.$t(p.title),p))}i18n(path){return this.$t(path)}get pageTitle(){return this.title?B.a.toTitleCase(this.title):""}productOptionFilterFields(){return[]}get product(){return new f.a(this)}get productCategoryRepo(){return new C.a(this)}get infinityOptions(){return R(R({},Object(v.a)(this.product)),{},{forceUseInfiniteWrapper:!0})}loadMore(t){this.product.$fetch(t,"",{params:R(R(R({},P.a.productFilterToOptions(this.form)),this.$app.route.path.includes("tags")&&{is_slug:!0}),{},{limit:15})})}onFilterChange(t){this.product.$fetch("","",{params:R(R(R({},P.a.productFilterToOptions(t)),this.$app.route.path.includes("tags")&&{is_slug:!0}),{},{limit:15})})}getCategoryItemClasses(t){var e;return{active:t===(null===(e=this.form)||void 0===e?void 0:e.sub_category_lvl2)||""}}onCategoryListClick(t){this.$refs.productFilterComp.onFetchBrand(t),this.formRepo.updateAttr(this.form_name,"sub_category_lvl2",t)}trackViewItemListEvent(){try{for(var t=[],e=0;e<this.product.items.length;e++){var r=0;this.product.items[e].price_promotion_number.length>0&&(r=parseFloat(this.product.items[e].price_number||"0")-parseFloat(this.product.items[e].price_promotion_number));var o={};this.product.items[e].categories&&(o=F.a.getCartProductCategories(this.product.items[e].categories,1));var n="";this.product.items[e].skus&&this.product.items[e].skus.length>0&&(n=F.a.getCartProductVariants(this.product.items[e].skus[0].options));var c=R(R({item_id:this.product.items[e].skus[0].sku,item_name:this.product.items[e].title,affiliation:w.a.config.APP_CLIENT,coupon:"",currency:"THB",discount:r,index:e,item_brand:this.product.items[e].brand.title},o),{},{item_list_name:this.productCategoryRepo.findItem.title||"",item_variant:n,price:parseFloat(this.product.items[e].price_number||"0"),quantity:1});t.push(c)}this.$gtm.push({ecommerce:null}),this.$gtm.push({event:"view_item_list",ecommerce:{item:t}})}catch(t){console.error(t)}}};E([Object(l.d)("form_name")],I.prototype,"form_name",void 0),E([Object(l.c)({default:!0})],I.prototype,"showBanner",void 0),E([Object(l.c)({default:!0})],I.prototype,"showBrandBar",void 0),E([Object(l.c)({default:!0})],I.prototype,"showFilter",void 0),E([Object(l.c)(String)],I.prototype,"title",void 0),E([$.a],I.prototype,"infinityOptions",null);var S=I=E([L.a,Object(l.a)({components:{BannerHeadLines:j.a,ProductsList:y.a,ProductFilter:m.a,Banners:d.a,BrandBarHeadLines:h.a,BannerBarHeadlines:_.a,PaymentBar:O.a}})],I),A=r(5),component=Object(A.a)(S,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"type-c"},[t.showBanner?r("div",{staticClass:"banner-list-container-background"},[r("div",{staticClass:"banner-list-container"},[r("div",{staticClass:"banner-wrapper"},[r("div",{staticClass:"category-container"},[t.productCategoryRepo.findStatus.isLoaded?r("ul",{staticClass:"categories"},[r("li",{staticClass:"header"},[r("span",[t._v(t._s(t.productCategoryRepo.findItem.title))])]),t._v(" "),t._l(t.productCategoryRepo.findItem.child,(function(e){return r("li",{key:e.tag_id,class:t.getCategoryItemClasses(e.tag_id),on:{click:function(r){return t.onCategoryListClick(e.tag_id)}}},[r("span",[t._v(t._s(e.title))])])}))],2):r("div",{staticClass:"category-loading"},[r("i",{staticClass:"icon icon-loading spinner"})])]),t._v(" "),r("BannerHeadLines",{attrs:{"banner-type":"category-top"}})],1)])]):t._e(),t._v(" "),r("div",{staticClass:"products-container"},[t.showBrandBar?r("BrandBarHeadLines",{attrs:{title:t.$t("product.brand_on_store"),viewAll:t.$t("product.brand_viewAll"),showLogo:!0}}):t._e(),t._v(" "),t.showFilter?r("ProductFilter",{ref:"productFilterComp",on:{change:t.onFilterChange},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}):t._e(),t._v(" "),r("ProductsList",{attrs:{title:t.pageTitle,items:t.product.items,infinityOptions:t.infinityOptions},on:{loadMore:t.loadMore}}),t._v(" "),t.showBanner?r("BannerBarHeadlines",{attrs:{className:"only-desktop","banner-type":"category-sub-top"}}):t._e(),t._v(" "),t.showBanner?r("BannerBarHeadlines",{attrs:{className:"only-mobile","banner-type":"category-sub-top",fullWidthImage:!0}}):t._e(),t._v(" "),r("BannerBarHeadlines",{attrs:{className:"only-desktop","banner-type":"category-bottom"}}),t._v(" "),r("BannerBarHeadlines",{attrs:{className:"only-mobile","banner-type":"category-bottom",fullWidthImage:!0}})],1)])}),[],!1,null,"103558af",null);e.a=component.exports},910:function(t,e,r){"use strict";r(18),r(17),r(16);var o=r(3),n=r(8),c=r(6),l=r(0),d=r(820),h=r(851),m=r(830),v=r(83),f=r(334),y=r(338),_=r(842),O=r(819),C=r(167),L=r(951),j=r(848),P=r(844),$=r(335),w=r(1),F=r(829);function B(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?B(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):B(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var R=function(t,e,r,desc){var o,n=arguments.length,c=n<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(n<3?o(c):n>3?o(e,r,c):o(e,r))||c);return n>3&&c&&Object.defineProperty(e,r,c),c},E=class extends c.c{constructor(){super(...arguments),this.footerData=r(339)("./".concat(this.$config.appClient,"/footer.js")).type_c,this.form_name="product_filter"}created(){this.formRepo.init(this.form_name,{max:"",min:"",order:"",brand:"",option:{},sub_category_lvl1:this.$app.route.params.id,sub_category_lvl2:"",sub_category_lvl3:""})}mounted(){var t=this;return Object(n.a)((function*(){t.product.$clear(),yield t.product.$fetch("","",{params:k(k({},P.a.productFilterToOptions(t.form)),{},{limit:15})}),t.trackViewItemListEvent()}))()}get paymentOption(){var data=this.footerData.footerPaymentOption;return data=data.map(p=>(p.title=this.$t(p.title),p))}i18n(path){return this.$t(path)}productOptionFilterFields(){return[]}get product(){return new f.a(this)}get productCategoryRepo(){return new C.a(this)}get infinityOptions(){return k(k({},Object(v.a)(this.product)),{},{forceUseInfiniteWrapper:!0})}loadMore(t){this.product.$fetch(t,"",{params:k(k({},P.a.productFilterToOptions(this.form)),{},{limit:15})})}onFilterChange(t){this.product.$fetch("","",{params:k(k({},P.a.productFilterToOptions(t)),{},{limit:15})}).then(t=>{this.$gtm.push({ecommerce:null}),this.$gtm.push({event:"pam_pageview",pagePath:"",pageTitle:"",visitorType:"customer"}),this.trackViewItemListEvent()})}getCategoryItemClasses(t){var e;return{active:t===(null===(e=this.form)||void 0===e?void 0:e.sub_category_lvl2)||""}}onCategoryListClick(t){this.formRepo.updateAttr(this.form_name,"sub_category_lvl2",t)}trackViewItemListEvent(){var t,e;try{for(var r=[],o=0;o<this.product.items.length;o++){var n=0;this.product.items[o].price_promotion_number.length>0&&(n=parseFloat(this.product.items[o].price_number||"0")-parseFloat(this.product.items[o].price_promotion_number));var c={};this.product.items[o].categories&&(c=F.a.getCartProductCategories(this.product.items[o].categories,1));var l="";this.product.items[o].skus&&this.product.items[o].skus.length>0&&(l=F.a.getCartProductVariants(this.product.items[o].skus[0].options));var d=k(k({item_id:this.product.items[o].skus[0].sku,item_name:this.product.items[o].title,affiliation:w.a.config.APP_CLIENT,coupon:"",currency:"THB",discount:n,index:o,item_brand:(null===(e=null===(t=this.product.items[o])||void 0===t?void 0:t.brand)||void 0===e?void 0:e.title)||""},c),{},{item_list_name:this.productCategoryRepo.findItem.title||"",item_variant:l,price:parseFloat(this.product.items[o].price_number||"0"),quantity:1});r.push(d)}this.$gtm.push({ecommerce:null}),this.$gtm.push({event:"view_item_list",ecommerce:{items:r}})}catch(t){console.error(t)}}};R([Object(l.d)("form_name")],E.prototype,"form_name",void 0),R([$.a],E.prototype,"infinityOptions",null);var I=E=R([L.a,Object(l.a)({components:{BannerHeadLines:j.a,ProductsList:y.a,ProductFilter:m.a,Banners:d.a,BrandBarHeadLines:h.a,BannerBarHeadlines:_.a,PaymentBar:O.a}})],E),S=r(5),component=Object(S.a)(I,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"type-c"},[r("div",{staticClass:"banner-list-container"},[r("div",{staticClass:"banner-wrapper"},[r("div",{staticClass:"category-container"},[t.productCategoryRepo.findStatus.isLoaded?r("ul",{staticClass:"categories"},[r("li",{staticClass:"header"},[r("span",[t._v(t._s(t.productCategoryRepo.findItem.title))])]),t._v(" "),t._l(t.productCategoryRepo.findItem.child,(function(e){return r("li",{key:e.tag_id,class:t.getCategoryItemClasses(e.tag_id),on:{click:function(r){return t.onCategoryListClick(e.tag_id)}}},[r("span",[t._v(t._s(e.title))])])}))],2):r("div",{staticClass:"category-loading"},[r("i",{staticClass:"icon icon-loading spinner"})])]),t._v(" "),r("BannerHeadLines",{attrs:{"banner-type":"category-top"}})],1)]),t._v(" "),r("div",{staticClass:"products-container"},[r("BrandBarHeadLines",{attrs:{title:t.$t("product.brand_on_store")}}),t._v(" "),r("ProductFilter",{on:{change:t.onFilterChange},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}}),t._v(" "),r("ProductsList",{attrs:{items:t.product.items,infinityOptions:t.infinityOptions},on:{loadMore:t.loadMore}}),t._v(" "),r("BannerBarHeadlines",{attrs:{className:"only-desktop","banner-type":"category-bottom"}})],1),t._v(" "),r("PaymentBar",{attrs:{option:t.paymentOption}})],1)}),[],!1,null,"3a754769",null);e.a=component.exports}}]);