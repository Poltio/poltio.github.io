/*! For license information please see index.js.LICENSE.txt */
(()=>{var t={94:()=>{window.requestIdleCallback=window.requestIdleCallback||function(t){const e=Date.now();return setTimeout((function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})}),1)},window.cancelIdleCallback=window.cancelIdleCallback||function(t){clearTimeout(t)}},168:(t,e,i)=>{var n;!function(s,r,o,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],h=r.createElement("div"),d=Math.round,u=Math.abs,p=Date.now;function v(t,e,i){return setTimeout(b(t,i),e)}function f(t,e,i){return!!Array.isArray(t)&&(m(t,i[e],i),!0)}function m(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function g(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=s.console&&(s.console.warn||s.console.log);return r&&r.call(s.console,n,i),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==a&&null!==n)for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])}return e}:Object.assign;var T=g((function(t,e,i){for(var n=Object.keys(e),s=0;s<n.length;)(!i||i&&t[n[s]]===a)&&(t[n[s]]=e[n[s]]),s++;return t}),"extend","Use `assign`."),y=g((function(t,e){return T(t,e,!0)}),"merge","Use `assign`.");function E(t,e,i){var n,s=e.prototype;(n=t.prototype=Object.create(s)).constructor=t,n._super=s,i&&l(n,i)}function b(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return"function"==typeof t?t.apply(e&&e[0]||a,e):t}function A(t,e){return t===a?e:t}function C(t,e,i){m(S(e),(function(e){t.addEventListener(e,i,!1)}))}function L(t,e,i){m(S(e),(function(e){t.removeEventListener(e,i,!1)}))}function x(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function R(t,e){return t.indexOf(e)>-1}function S(t){return t.trim().split(/\s+/g)}function I(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function O(t){return Array.prototype.slice.call(t,0)}function _(t,e,i){for(var n=[],s=[],r=0;r<t.length;){var o=e?t[r][e]:t[r];I(s,o)<0&&n.push(t[r]),s[r]=o,r++}return i&&(n=e?n.sort((function(t,i){return t[e]>i[e]})):n.sort()),n}function $(t,e){for(var i,n,s=e[0].toUpperCase()+e.slice(1),r=0;r<c.length;){if((n=(i=c[r])?i+s:e)in t)return n;r++}return a}var U=1;function M(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||s}var D="ontouchstart"in s,N=$(s,"PointerEvent")!==a,k=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),P="touch",B="mouse",F=["x","y"],W=["clientX","clientY"];function H(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&i.handler(e)},this.init()}function G(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,r=1&e&&n-s==0,o=12&e&&n-s==0;i.isFirst=!!r,i.isFinal=!!o,r&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=j(e)),s>1&&!i.firstMultiple?i.firstMultiple=j(e):1===s&&(i.firstMultiple=!1);var r=i.firstInput,o=i.firstMultiple,l=o?o.center:r.center,c=e.center=z(n);e.timeStamp=p(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=V(l,c),e.distance=Y(l,c),function(t,e){var i=e.center,n=t.offsetDelta||{},s=t.prevDelta||{},r=t.prevInput||{};1!==e.eventType&&4!==r.eventType||(s=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=s.x+(i.x-n.x),e.deltaY=s.y+(i.y-n.y)}(i,e),e.offsetDirection=q(e.deltaX,e.deltaY);var h,d,v=X(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=v.x,e.overallVelocityY=v.y,e.overallVelocity=u(v.x)>u(v.y)?v.x:v.y,e.scale=o?(h=o.pointers,Y((d=n)[0],d[1],W)/Y(h[0],h[1],W)):1,e.rotation=o?function(t,e){return V(e[1],e[0],W)+V(t[1],t[0],W)}(o.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,s,r,o=t.lastInterval||e,l=e.timeStamp-o.timeStamp;if(8!=e.eventType&&(l>25||o.velocity===a)){var c=e.deltaX-o.deltaX,h=e.deltaY-o.deltaY,d=X(l,c,h);n=d.x,s=d.y,i=u(d.x)>u(d.y)?d.x:d.y,r=q(c,h),t.lastInterval=e}else i=o.velocity,n=o.velocityX,s=o.velocityY,r=o.direction;e.velocity=i,e.velocityX=n,e.velocityY=s,e.direction=r}(i,e);var f=t.element;x(e.srcEvent.target,f)&&(f=e.srcEvent.target),e.target=f}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function j(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:d(t.pointers[i].clientX),clientY:d(t.pointers[i].clientY)},i++;return{timeStamp:p(),pointers:e,center:z(e),deltaX:t.deltaX,deltaY:t.deltaY}}function z(t){var e=t.length;if(1===e)return{x:d(t[0].clientX),y:d(t[0].clientY)};for(var i=0,n=0,s=0;s<e;)i+=t[s].clientX,n+=t[s].clientY,s++;return{x:d(i/e),y:d(n/e)}}function X(t,e,i){return{x:e/t||0,y:i/t||0}}function q(t,e){return t===e?1:u(t)>=u(e)?t<0?2:4:e<0?8:16}function Y(t,e,i){i||(i=F);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return Math.sqrt(n*n+s*s)}function V(t,e,i){i||(i=F);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return 180*Math.atan2(s,n)/Math.PI}H.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&L(this.element,this.evEl,this.domHandler),this.evTarget&&L(this.target,this.evTarget,this.domHandler),this.evWin&&L(M(this.element),this.evWin,this.domHandler)}};var K={mousedown:1,mousemove:2,mouseup:4};function Z(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,H.apply(this,arguments)}E(Z,H,{handler:function(t){var e=K[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:B,srcEvent:t}))}});var J={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Q={2:P,3:"pen",4:B,5:"kinect"},tt="pointerdown",et="pointermove pointerup pointercancel";function it(){this.evEl=tt,this.evWin=et,H.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}s.MSPointerEvent&&!s.PointerEvent&&(tt="MSPointerDown",et="MSPointerMove MSPointerUp MSPointerCancel"),E(it,H,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),s=J[n],r=Q[t.pointerType]||t.pointerType,o=r==P,a=I(e,t.pointerId,"pointerId");1&s&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):12&s&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,s,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),i&&e.splice(a,1))}});var nt={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function st(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,H.apply(this,arguments)}function rt(t,e){var i=O(t.touches),n=O(t.changedTouches);return 12&e&&(i=_(i.concat(n),"identifier",!0)),[i,n]}E(st,H,{handler:function(t){var e=nt[t.type];if(1===e&&(this.started=!0),this.started){var i=rt.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:P,srcEvent:t})}}});var ot={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function at(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},H.apply(this,arguments)}function lt(t,e){var i=O(t.touches),n=this.targetIds;if(3&e&&1===i.length)return n[i[0].identifier]=!0,[i,i];var s,r,o=O(t.changedTouches),a=[],l=this.target;if(r=i.filter((function(t){return x(t.target,l)})),1===e)for(s=0;s<r.length;)n[r[s].identifier]=!0,s++;for(s=0;s<o.length;)n[o[s].identifier]&&a.push(o[s]),12&e&&delete n[o[s].identifier],s++;return a.length?[_(r.concat(a),"identifier",!0),a]:void 0}function ct(){H.apply(this,arguments);var t=b(this.handler,this);this.touch=new at(this.manager,t),this.mouse=new Z(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function ht(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,dt.call(this,e)):12&t&&dt.call(this,e)}function dt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout((function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)}),2500)}}function ut(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var s=this.lastTouches[n],r=Math.abs(e-s.x),o=Math.abs(i-s.y);if(r<=25&&o<=25)return!0}return!1}E(at,H,{handler:function(t){var e=ot[t.type],i=lt.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:P,srcEvent:t})}}),E(ct,H,{handler:function(t,e,i){var n=i.pointerType==P,s=i.pointerType==B;if(!(s&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)ht.call(this,e,i);else if(s&&ut.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var pt=$(h.style,"touchAction"),vt=pt!==a,ft="compute",mt="auto",gt="manipulation",Tt="none",yt="pan-x",Et="pan-y",bt=function(){if(!vt)return!1;var t={},e=s.CSS&&s.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){t[i]=!e||s.CSS.supports("touch-action",i)})),t}();function wt(t,e){this.manager=t,this.set(e)}wt.prototype={set:function(t){t==ft&&(t=this.compute()),vt&&this.manager.element.style&&bt[t]&&(this.manager.element.style[pt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return m(this.manager.recognizers,(function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(R(t,Tt))return Tt;var e=R(t,yt),i=R(t,Et);return e&&i?Tt:e||i?e?yt:Et:R(t,gt)?gt:mt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,s=R(n,Tt)&&!bt[Tt],r=R(n,Et)&&!bt[Et],o=R(n,yt)&&!bt[yt];if(s){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}if(!o||!r)return s||r&&6&i||o&&24&i?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var At=32;function Ct(t){this.options=l({},this.defaults,t||{}),this.id=U++,this.manager=null,this.options.enable=A(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Lt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function xt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Rt(t,e){var i=e.manager;return i?i.get(t):t}function St(){Ct.apply(this,arguments)}function It(){St.apply(this,arguments),this.pX=null,this.pY=null}function Ot(){St.apply(this,arguments)}function _t(){Ct.apply(this,arguments),this._timer=null,this._input=null}function $t(){St.apply(this,arguments)}function Ut(){St.apply(this,arguments)}function Mt(){Ct.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Dt(t,e){return(e=e||{}).recognizers=A(e.recognizers,Dt.defaults.preset),new Nt(t,e)}function Nt(t,e){this.options=l({},Dt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(N?it:k?at:D?ct:Z))(this,G),this.touchAction=new wt(this,this.options.touchAction),kt(this,!0),m(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function kt(t,e){var i,n=t.element;n.style&&(m(t.options.cssProps,(function(s,r){i=$(n.style,r),e?(t.oldCssProps[i]=n.style[i],n.style[i]=s):n.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}Ct.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(f(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Rt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return f(t,"dropRecognizeWith",this)||(t=Rt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(f(t,"requireFailure",this))return this;var e=this.requireFail;return-1===I(e,t=Rt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(f(t,"dropRequireFailure",this))return this;t=Rt(t,this);var e=I(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<8&&n(e.options.event+Lt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=8&&n(e.options.event+Lt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=At},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=At);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},E(St,Ct,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=6&e,s=this.attrTest(t);return n&&(8&i||!s)?16|e:n||s?4&i?8|e:2&e?4|e:2:At}}),E(It,St,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(Et),24&t&&e.push(yt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,s=t.direction,r=t.deltaX,o=t.deltaY;return s&e.direction||(6&e.direction?(s=0===r?1:r<0?2:4,i=r!=this.pX,n=Math.abs(t.deltaX)):(s=0===o?1:o<0?8:16,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=s,i&&n>e.threshold&&s&e.direction},attrTest:function(t){return St.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=xt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),E(Ot,St,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Tt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),E(_t,Ct,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[mt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,s=t.deltaTime>e.time;if(this._input=t,!n||!i||12&t.eventType&&!s)this.reset();else if(1&t.eventType)this.reset(),this._timer=v((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return At},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),E($t,St,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Tt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),E(Ut,St,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return It.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return 30&i?e=t.overallVelocity:6&i?e=t.overallVelocityX:24&i&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&u(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=xt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),E(Mt,Ct,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[gt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,s=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(n&&s&&i){if(4!=t.eventType)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||Y(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&r?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=v((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return At},failTimeout:function(){return this._timer=v((function(){this.state=At}),this.options.interval,this),At},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Dt.VERSION="2.0.7",Dt.defaults={domEvents:!1,touchAction:ft,enable:!0,inputTarget:null,inputClass:null,preset:[[$t,{enable:!1}],[Ot,{enable:!1},["rotate"]],[Ut,{direction:6}],[It,{direction:6},["swipe"]],[Mt],[Mt,{event:"doubletap",taps:2},["tap"]],[_t]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Nt.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,s=e.curRecognizer;(!s||s&&8&s.state)&&(s=e.curRecognizer=null);for(var r=0;r<n.length;)i=n[r],2===e.stopped||s&&i!=s&&!i.canRecognizeWith(s)?i.reset():i.recognize(t),!s&&14&i.state&&(s=e.curRecognizer=i),r++}},get:function(t){if(t instanceof Ct)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(f(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(f(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=I(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var i=this.handlers;return m(S(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this}},off:function(t,e){if(t!==a){var i=this.handlers;return m(S(t),(function(t){e?i[t]&&i[t].splice(I(i[t],e),1):delete i[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=r.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&kt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Dt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:At,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Nt,Input:H,TouchAction:wt,TouchInput:at,MouseInput:Z,PointerEventInput:it,TouchMouseInput:ct,SingleTouchInput:st,Recognizer:Ct,AttrRecognizer:St,Tap:Mt,Pan:It,Swipe:Ut,Pinch:Ot,Rotate:$t,Press:_t,on:C,off:L,each:m,merge:y,extend:T,assign:l,inherit:E,bindFn:b,prefixed:$}),(void 0!==s?s:"undefined"!=typeof self?self:{}).Hammer=Dt,(n=function(){return Dt}.call(e,i,e,t))===a||(t.exports=n)}(window,document)}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=async t=>JSON.parse(await(async t=>new Promise(((e,i)=>{const n=new XMLHttpRequest;n.onload=()=>{e(n.responseText)},n.onerror=()=>{i(new Error("Local request failed"))},n.open("GET",t),n.send()})))(t)),e=new Map,n=async(i,n)=>{const s=`${i}/assets/locales/${n}.json`;if(!e.has(s)){const i=await t(s);i&&e.set(s,i)}return e.get(s)},s=(t,e,i=0,n=0)=>new Intl.NumberFormat(t,{minimumFractionDigits:i,maximumFractionDigits:n}).format(e),r=t=>(e,i,n)=>{const r=new RegExp(`{${i},[ ]*number}`,"g");return e.replaceAll(r,s(t,+n))},o=(t,e,i)=>{const n=new RegExp(`{${e}, plural, .+?}}`,"g");let s=new RegExp("=0[ ]*{(.*?)}","g");const r=+i;1===r?s=new RegExp("one[ ]*{(.*?)}","g"):r>1&&(s=new RegExp("other[ ]*{(.*?)}","g"));const o=s.exec(t);return o?t.replaceAll(n,o[1].replace("#",i)):t},a=(t,e,i)=>t.replaceAll(`{${e}}`,i),l=(t,e,i)=>{const n=new RegExp(`{${e}, select, .+?}[ ]*}`,"g"),s=new RegExp(`${i}[ ]*{(.*?)}`,"g").exec(t);return s?t.replaceAll(n,s[1]):t},c=async(t,e,i,s)=>{let c;try{if(c=await n(t,e),!c)throw new Error(`Could not find ${e} object`)}catch(e){c=await n(t,"en-GB")}if(!c)return i;let h=c[i];return h||(h=i.split(".").reduce(((t,e)=>t[e]),c)),h&&((t,e,i)=>{if(!e||!i)return e;const n=[o,r(t),a,l];return Object.entries(i).reduce(((t,[e,i])=>n.reduceRight(((t,n)=>n(t,e,i)),t)),e)})(e,h,s)||i},h=t=>e=>{customElements.get(t.selector)||customElements.define(t.selector,e)};const d=e=>{return i=void 0,n=void 0,r=function*(){const i=yield t(e);if("object"==typeof i&&0===Object.keys(i).length)throw new Error("Server returned empty object!");return i},new((s=void 0)||(s=Promise))((function(t,e){function o(t){try{l(r.next(t))}catch(t){e(t)}}function a(t){try{l(r.throw(t))}catch(t){e(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(o,a)}l((r=r.apply(i,n||[])).next())}));var i,n,s,r};var u;!function(t){t.STATIC="static",t.FOCUSED="focused",t.REDUCED="reduced"}(u||(u={}));const p=u;var v;!function(t){t.EXCELLENT="EXCELLENT",t.GOOD="GOOD",t.FAIR="FAIR",t.POOR="POOR",t.VERY_POOR="VERY_POOR"}(v||(v={}));const f=v,m="data-key-nav",g=new Map;let T=0;const y=(t,e="")=>{var i;return null!==(i=t.getAttribute(m))&&void 0!==i?i:e},E=t=>{var e;return null!==(e=g.get(y(t)))&&void 0!==e?e:void 0},b=(t,e,...i)=>{const n={element:t,tabIndex:e,callback:new Map([...i])},s=y(t,T.toString());return t.setAttribute(m,`${s}`),g.set(`${s}`,n),T+=1,n},w=t=>{g.set(y(t.element),t)},A=(t,e=0)=>{t.setAttribute("tabindex",`${e}`)},C=(t,e)=>{requestIdleCallback((()=>{const i=(t=>{var e;return Number(null!==(e=t.getAttribute("tabindex"))&&void 0!==e?e:0)})(t);A(t,-1),t.contentEditable="true",t.focus(),A(t,null!=e?e:i),t.contentEditable="false"}))},L=(t,e)=>["Enter",()=>{e&&e(),t.click()}],x=(t,e)=>{var i;const n=((t,e)=>{var i;const n=null!==(i=E(t))&&void 0!==i?i:b(t,e);return n.tabIndex=e,A(n.element,e),w(n),n})(t,e);null===(i=n.children)||void 0===i||i.forEach((t=>{const i=g.get(t);i&&(i.tabIndex=e,A(i.element,e),w(i))})),w(n)},R=(t,e=1,...i)=>{((t,e,...i)=>{const n=i.length>0?i:[L(t)];b(t,e,...n),A(t,e),(t=>{const e=E(t);if(!e||void 0===e.callback)return;const i=t=>{var i;(null===(i=e.callback)||void 0===i?void 0:i.has(t.key))&&(t.stopPropagation(),(t=>{try{if(!t)return;return t()}catch(t){console.log("error: ",t)}})(e.callback.get(t.key)))};e.eventListener=[()=>{t.addEventListener("keydown",i)},()=>{t.removeEventListener("keydown",i)}],t.addEventListener("focus",e.eventListener[0]),t.addEventListener("focusout",e.eventListener[1]),w(e)})(t)})(t,e,...i)},S=t=>{A(t,-1),(t=>{(t=>{const e=E(t);e&&e.eventListener&&(t.removeEventListener("focus",e.eventListener[0]),t.removeEventListener("focusout",e.eventListener[1]))})(t),(t=>{g.delete(y(t))})(t)})(t)},I=(t,e,i,n="key")=>{((t,e)=>{var i,n;let s=Array.from(t.querySelectorAll(e));return 0===s.length&&(s=Array.from(null!==(n=null===(i=t.shadowRoot)||void 0===i?void 0:i.querySelectorAll(e))&&void 0!==n?n:[])),s})(t.element,e).forEach((e=>{var s;"hover"===n?((t,e=1)=>{b(t,e),A(t,e),(t=>{const e=E(t);e&&(e.eventListener=[()=>{t.dispatchEvent(new Event("mouseenter"))},()=>{t.dispatchEvent(new Event("mouseleave"))}],t.addEventListener("focus",e.eventListener[0]),t.addEventListener("focusout",e.eventListener[1]),w(e))})(t)})(e,i):R(e,i),t.children=[...null!==(s=t.children)&&void 0!==s?s:[],y(e,"")]})),w(t)},O=(t,e,i=1)=>{const n=E(t);n&&I(n,e,i,"hover")},_=(t,e,i=1)=>{const n=E(t);n&&I(n,e,i)};var $,U=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))};let M=$=class extends HTMLElement{constructor(t,e,i,n,s,r=0){super(),this.context=t,this.tile=e,this.tileDisplayMode=i,this.focusMode=n,this.displaySize=s,this.index=r,this.tabIndex=1,this.tabIndex=this.tileDisplayMode===p.FOCUSED?0:1}connectedCallback(){return U(this,void 0,void 0,(function*(){yield this.render(this.tile,this.tileDisplayMode,this.displaySize),this.addEventListener("click",(()=>{this.context.settings.focusWrapper.open(this.tile,this)})),R(this,this.tabIndex),O(this,"etrusted-rc-tooltip",this.tabIndex),_(this,"a",this.tabIndex)}))}disconnectedCallback(){removeEventListener("click",(()=>{this.context.settings.focusWrapper.open(this.tile,this)}))}updateSize(t){this.classList.add(`tile-${t.toLowerCase()}`)}render(t,e,i){return U(this,void 0,void 0,(function*(){const{baseUrl:n,settings:{locale:s}}=this.context,r=e===p.FOCUSED;this.classList.add("grade-tile"),this.classList.add("tile"),this.classList.add(`grade-tile-${e.toLowerCase()}`),this.setAttribute("data-etrusted-tile-id","grade"),this.setAttribute("data-etrusted-tile-index",String(this.index)),i&&this.classList.add(`tile-${i.toLowerCase()}`);const[o]=r?yield this.getFullTile(t,n,s):yield $.getSimpleTile(t,n,s);this.innerHTML=`\n          <div class="summary-rating">\n            <etrusted-rc-star-rating\n              locale="${s}"\n              baseUrl="${n}"\n              rating="${t.grade}"\n            ></etrusted-rc-star-rating>\n          </div>\n          ${o}\n       `}))}static getSimpleTile(t,e,i){return U(this,void 0,void 0,(function*(){var n;return[`\n          <div class="summary-headline">${s(i,t.grade,2,2)}</div>\n          <span class="summary-grade">${yield c(e,i,"gradeSummary",{gradeSummary:(n=t.grade,n<1.5?f.VERY_POOR:n<2.5?f.POOR:n<3.5?f.FAIR:n<4.5?f.GOOD:f.EXCELLENT)})}</span>\n          <span class="summary-logo" aria-label="${yield c(e,i,"ariaLabel.logo")}"></span>\n    `]}))}getFullTile(t,e,i){return U(this,void 0,void 0,(function*(){return[` \n                  <div class="summary-headline">${yield c(e,i,"shopSummary.headline",{grade:s(i,t.grade,2,2),maxGrade:"5",number:s(i,t.count,2,2)})}</div>\n                  <div class="summary-body">\n                    ${yield c(e,i,"shopSummary.body",{totalReviewCount:s(i,t.overallCount,0,0),yearReviewCount:s(i,t.count,0,0),seoProfileUrl:this.context.channel.seoProfileUrl})}\n                   </div>\n                  <div class="summary-authenticity">\n                    ${yield c(e,i,"shopSummary.authenticity")}\n                  </div>\n                `]}))}};M=$=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-rc-carousel-grade-tile"})],M);const D=(t,e)=>{const i=new Intl.RelativeTimeFormat(t,{numeric:"auto"}),n=new Date,s=new Date(e),r=s.getTime()-n.getTime(),o=Math.trunc(r/1e3),a=Math.abs(o);let l=o,c="second";if(a>=60&&a<3600)l=Math.trunc(o/60),c="minute";else if(a>3600&&a<86400)l=Math.trunc(o/3600),c="hour";else if(a>=86400&&a<604800)l=Math.trunc(o/86400),c="day";else if(a>604800)return s.toLocaleDateString(t);return i.format(l,c)};let N=class extends HTMLElement{constructor(t=3){super(),this.ellipsis="...",this.lines=3,this.isTruncated=!1,this.lines=t}connectedCallback(){this.maxAvailableHeight=parseInt(window.getComputedStyle(this).lineHeight,10)*this.lines,this.isTruncated=this.needToTruncate(this),this.style.height=`${this.maxAvailableHeight}px`,this.isTruncated&&this.truncate(this),this.setAttribute("data-truncated",`${this.isTruncated}`),this.render(this.isTruncated)}needToTruncate(t){const e=t.scrollHeight,i=t.scrollWidth;return e>this.maxAvailableHeight||i>this.maxAvailableWidth}truncate(t){var e;const i=this.childNodes[0];null===(e=i.textContent)||void 0===e||e.split(" ").some(((e,i)=>{const n=0===i?"":t.textContent,s=`${n} ${e}`;return t.innerText=s,t.scrollHeight>this.maxAvailableHeight&&(t.innerText=n.slice(0,-4),!0)})),0===i.textContent.length&&t.removeChild(i)}render(t){this.textContent=`${this.textContent}${t?this.ellipsis:""}`}};N=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-rc-carousel-text-clamp"})],N);const k=N;var P,B=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))};let F=P=class extends HTMLElement{constructor(t,e,i,n,s,r=0){super(),this.context=t,this.tile=e,this.tileDisplayMode=i,this.focusMode=n,this.displaySize=s,this.index=r,this.clickListener=t=>{const{className:e}=t.target;"tooltip-text"!==e&&this.context.settings.focusWrapper.open(this.tile,this)},this.isTruncated=!1,this.rendered=!1,this.tabIndex=-1,this.tabIndex=this.tileDisplayMode===p.FOCUSED?0:-1}connectedCallback(){var t;return B(this,void 0,void 0,(function*(){this.rendered||(yield this.render(this.tile,this.tileDisplayMode,this.displaySize),this.updateGallery(this.tile),this.tileDisplayMode===p.REDUCED&&this.addEventListener("click",this.clickListener),R(this,this.tabIndex),O(this,"etrusted-rc-tooltip",this.tabIndex),_(this,"a",this.tabIndex),this.gallery&&(this.tileDisplayMode===p.REDUCED?_(this,"etrusted-widget-image-gallery",-1):null===(t=this.gallery.outsideModal)||void 0===t||t.setAttribute("data-parent-tabindex",`${this.tabIndex+2}`)))}))}disconnectedCallback(){removeEventListener("click",this.clickListener)}updateSize(t){var e;const i=null!==(e=this.displaySize)&&void 0!==e?e:"";this.displaySize=t,this.classList.remove(`tile-${i.toLowerCase()}`),this.classList.add(`tile-${t.toLowerCase()}`)}getGallery(){const{baseUrl:t,settings:{theme:e,locale:i,fontStyle:n}}=this.context,s=document.createElement("etrusted-widget-image-gallery");s.outsideModal=this.context.settings.focusGallery,s.alwaysUpdate=!1,s.setAttribute("data-locale",i),s.setAttribute("data-base-url",t),s.setAttribute("data-font-style",n),s.setAttribute("data-theme",e),s.classList.add("gallery",this.tile.id),this.gallery=s}updateGallery(t){var e,i;this.gallery&&(this.gallery.data={review:Object.assign(Object.assign({},t),{isVerified:!0,consumer:{firstName:null!==(i=null===(e=t.consumer)||void 0===e?void 0:e.firstName)&&void 0!==i?i:""},images:t.images?t.images.map((t=>({id:t.id,url:t.original.url}))):[]})})}render(t,e,i){return B(this,void 0,void 0,(function*(){const{baseUrl:n,channel:{name:s},settings:{locale:r}}=this.context,o=e===p.FOCUSED;this.classList.add("review-tile"),this.classList.add("tile"),this.classList.add(`review-tile-${e.toLowerCase()}`),this.setAttribute("data-etrusted-tile-id",t.id),this.setAttribute("data-etrusted-tile-index",String(this.index)),i&&this.classList.add(`tile-${i.toLowerCase()}`),this.context.settings.showUGC&&t.images&&this.getGallery(),yield this.getHeader(t,n,r,o),yield this.getSubline(t,n,r,o),yield this.getBody(t,n,r,s,o),this.append(this.header,this.subline,this.body),this.isTruncated="true"===this.querySelector(".text").getAttribute("data-truncated"),yield this.getFooter(t,n,r,o),this.append(this.footer),this.rendered=!0}))}getHeader(t,e,i,n){return B(this,void 0,void 0,(function*(){if(this.header)return;const s=yield c(e,i,"imported.short");if(this.header=document.createElement("div"),this.header.classList.add("headline"),n)this.header.innerHTML=`<etrusted-rc-star-rating baseUrl="${e}" rating="${t.rating}"></etrusted-rc-star-rating>`;else{const n=t.isVerified?'<span class="verified-icon"></span>':`<span class="imported">${s}</span>`;this.header.innerHTML=`\n      <etrusted-rc-star-rating \n             locale="${i}"\n             baseUrl="${e}"\n             rating="${t.rating}"></etrusted-rc-star-rating>\n      ${n}\n      `}}))}getSubline(t,e,i,n){return B(this,void 0,void 0,(function*(){if(this.subline)return;let s="";const r=yield c(e,i,"review.writtenBy");if(t.consumer){const{firstName:e,lastName:i}=t.consumer;s=`${r}${e?" "+e:""}${i?" "+i:""}`}const o=D(i,t.date).trim(),a=yield c(e,i,"dateTooltip.submission"),l="<br />"+(yield c(e,i,"dateTooltip.transaction"))+" "+(t.transactionDate?D(i,t.transactionDate).trim():o);if(this.subline=document.createElement("div"),this.subline.classList.add("subline"),this.subline.innerHTML=`\n        <etrusted-rc-tooltip content="${a} ${o} ${l}">\n            <span class="tooltip-text">${o} ${s}</span>\n        </etrusted-rc-tooltip>`,n){const n=yield c(e,i,"review.modal.verifiedExplanation"),s=yield c(e,i,"imported.tooltip"),r=yield c(e,i,t.isVerified?"verifiedCopy":"imported.long"),o=t.isVerified?n:s;this.subline.innerHTML=`\n                   <etrusted-rc-tooltip content="${o}">\n                      <span class="review-${t.isVerified?"verified":"imported"}">\n                        <span class="icon"></span>\n                        <span>\n                          ${r}\n                        </span>\n                      </span>\n                    </etrusted-rc-tooltip>`}else this.subline.classList.add("first-line")}))}static getReply(t,e,i,n){var s,r;return B(this,void 0,void 0,(function*(){const o=t.reply?D(i,null===(s=t.reply)||void 0===s?void 0:s.date).trim():void 0,a=yield c(e,i,"review.modal.replyFrom");return t.reply?`<div class="reply">\n            <span class="reply-icon"></span>\n            <span class="reply-headline">\n              ${a} ${n}\n            </span>\n            <span class="reply-date">${null!=o?o:""}</span>\n            <img class="reply-comment-marker">\n            <div class="reply-comment">\n              ${null===(r=t.reply)||void 0===r?void 0:r.comment}\n            </div>\n          </div>`:""}))}getBody(t,e,i,n,s){var r,o;return B(this,void 0,void 0,(function*(){if(!this.body)if(this.body=document.createElement("div"),this.body.classList.add("content"),s){const s=document.createElement("div");s.classList.add("scroll-wrapper"),s.setAttribute("tabindex","1");const r=t.title?`<span class="title">${t.title}</span>`:"",o=`<div class="text">${t.comment}</div>`,a=t.reply?yield P.getReply(t,e,i,n):"";s.innerHTML=`${r}${o}${a}`,this.gallery&&s.append(this.gallery),this.body.replaceChildren(s)}else{const e=t.title&&!(null===(r=t.comment)||void 0===r?void 0:r.startsWith(t.title.trim()))?`<span class="title">${t.title}</span>`:"",i=t.images?e.trim().length>0&&t.comment?1:2:3,n=new k(i);n.classList.add("text",String(i)),n.innerHTML=null!==(o=t.comment)&&void 0!==o?o:"",this.body.innerHTML=`${e}`,this.body.append(n),this.gallery&&this.body.append(this.gallery)}}))}getFooter(t,e,i,n){return B(this,void 0,void 0,(function*(){this.footer=document.createElement("div"),this.footer.classList.add("footer");const s=yield c(e,i,"readAnswer"),r=yield c(e,i,"readMore"),o=yield c(e,i,"review.modal.linkTitle");n?this.footer.innerHTML=`<a target="_blank" href="${this.context.channel.seoProfileUrl}">${o}</a><span class="shop-link"></span>`:t.reply?this.footer.innerHTML=`<span class="read-reply"></span> ${s}`:this.isTruncated&&(this.footer.innerHTML=r)}))}};F=P=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-rc-carousel-review-tile"})],F);var W;!function(t){t.CENTER="center",t.LEFT="left",t.RIGHT="right"}(W||(W={}));let H=class extends HTMLElement{constructor(){super(...arguments),this.ATTRIBUTE_CONTENT="content",this.ATTRIBUTE_ORIENTATION="orientation"}connectedCallback(){return t=this,e=void 0,n=function*(){this.content=this.getAttribute(this.ATTRIBUTE_CONTENT)||"",this.orientation=this.getAttribute(this.ATTRIBUTE_ORIENTATION)||W.CENTER,requestIdleCallback((()=>{this.addEventListener("mouseenter",(()=>this.open())),this.addEventListener("mouseleave",(()=>this.close()))}))},new((i=void 0)||(i=Promise))((function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}));var t,e,i,n}open(){this.toolTipContainer?this.toolTipContainer.style.display="block":this.render()}close(){this.toolTipContainer.style.display="none"}setPosition(t){const e=this.children[0],i=-this.toolTipContainer.offsetWidth/2+e.getBoundingClientRect().width/2;t.style.left=`${i}px`}render(){this.toolTipContainer=document.createElement("div"),this.toolTipContainer.classList.add("tooltip-wrapper"),this.toolTipContainer.classList.add(this.orientation),this.toolTipContainer.innerHTML=`\n      <div class="tooltip">\n        <span>${this.content}</span>\n      </div>\n    `,this.appendChild(this.toolTipContainer),this.setPosition(this.toolTipContainer)}};var G;H=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-rc-tooltip"})],H),function(t){t.RELATIVE="relative",t.CENTERED="centered"}(G||(G={}));const j=G;var z=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))};let X=class extends HTMLElement{constructor(){super(...arguments),this.smallDisplaySizeMaxWidth=599,this.scaleWidth=1.4241}connectedCallback(){this.host=this.getRootNode().host,this.context=this.host.getContext(),this.baseUrl=this.context.baseUrl,this.locale=this.context.settings.locale,this.animationDuration=this.context.settings.animationDurationFocus,this.eventListener=t=>{this.isOutSideClick(t)},this.focusWrapper=this.context.settings.focusWrapper,window.addEventListener("click",this.eventListener)}disconnectedCallback(){window.removeEventListener("click",this.eventListener)}isOutSideClick(t){var e;return z(this,void 0,void 0,(function*(){t.target&&this.focusElement&&(null===(e=this.animation)||void 0===e?void 0:e.currentTime)===this.context.settings.animationDurationFocus&&(this.focusWrapper.contains(t.composedPath()[0])||(yield this.close()))}))}open(t,e){return z(this,void 0,void 0,(function*(){this.animation&&this.animation.currentTime===this.animationDuration&&(yield this.close()),yield this.render(t,e),setTimeout((()=>{this.animateTile((t.id,e)),((t,e=1,...i)=>{R(t,e,...i),C(t,1)})(this.focusElement,1,["Escape",()=>this.close(e)]),_(this.focusElement,"button",1),_(this.focusElement,"a",1)}),20),setTimeout((()=>{(t=>{var e,i,n;const s=E(t);if(s&&(null===(e=s.children)||void 0===e?void 0:e.length)&&(null===(i=s.children)||void 0===i?void 0:i.length)>0){const e=null===(n=g.get([...s.children].pop()))||void 0===n?void 0:n.element;null==e||e.addEventListener("keydown",(e=>{"Tab"!==e.key||e.shiftKey||C(t)}))}})(this.focusElement),(t=>{var e,i,n;const s=E(t);if(s&&(null===(e=s.children)||void 0===e?void 0:e.length)&&(null===(i=s.children)||void 0===i?void 0:i.length)>0){const e=null===(n=g.get([...s.children].pop()))||void 0===n?void 0:n.element;t.addEventListener("keydown",(i=>{if("Tab"===i.key&&i.shiftKey&&(t=>t.getRootNode().activeElement)(t)===t){if(!e)return;C(e)}}))}})(this.focusElement)}),20)}))}close(t){var e,i,n,s;return z(this,void 0,void 0,(function*(){"finished"===(null===(e=this.animation)||void 0===e?void 0:e.playState)&&0!==(null===(i=this.animation)||void 0===i?void 0:i.currentTime)&&(null===(n=this.animation)||void 0===n||n.reverse(),yield null===(s=this.animation)||void 0===s?void 0:s.finished,x(this.focusElement,-1),t&&C(t))}))}getDimensions(t){const e=t.getBoundingClientRect(),i=this.host.getBoundingClientRect();return{elementX:e.x-i.x,elementY:e.y-i.y,elementWidth:t.offsetWidth,elementHeight:t.offsetHeight,wrapperX:i.left,wrapperY:i.top,wrapperWidth:i.width,wrapperHeight:i.height}}getAnimationDimensions(t){return z(this,void 0,void 0,(function*(){const e=this.getDimensions(t),{width:i,height:n,fullscreen:s}=this.getMaxSize(this.focusElement,e.elementWidth,t.focusMode);let r=e.wrapperWidth/2-(s?i:this.focusWrapper.offsetWidth)/2,o={left:r,top:e.wrapperHeight/2-n/2,height:n};return(t.focusMode===j.RELATIVE||s)&&(r=s?-1*e.wrapperX:e.elementX-(i-e.elementWidth)/2,o.left=r+i>innerWidth?r+(innerWidth-(r+i)):r,o.top=Math.abs(e.elementHeight-n)/2>e.wrapperY?-1*e.wrapperY:(e.elementHeight-n)/2,o=Object.assign(Object.assign({},o),{width:i})),o}))}setAnimationStyles(t){this.focusWrapper.style.removeProperty("maxWidth"),Object.entries(t).forEach((([t,e])=>{this.focusWrapper.style[t]=e?`${"number"==typeof e?`${e}px`:e}`:""}))}prepareTileStyles(t,e){e.style.pointerEvents=t?"none":"all",this.focusWrapper.style.display=t?"block":"none",this.focusWrapper.style.pointerEvents=t?"all":"none"}animateTile(t){return z(this,void 0,void 0,(function*(){this.prepareTileStyles(!0,t);const e=yield this.getAnimationDimensions(t);this.setAnimationStyles(e);this.animation=this.focusWrapper.animate([{transform:"scale(0.6)",opacity:"0"},{transform:"scale(1)",opacity:"1"}],{duration:this.animationDuration,fill:"both"}),this.animation.onfinish=({currentTarget:e})=>{this.prepareTileStyles(e.playbackRate>0,t)}}))}getMaxSize(t,e,i){const n=e*this.scaleWidth,s=window.innerWidth,r=s>this.smallDisplaySizeMaxWidth?Math.min(s,n):s,o=s<n||s<=this.smallDisplaySizeMaxWidth;return this.setAnimationStyles(o?{width:r,maxWidth:""}:{maxWidth:i===j.RELATIVE?r:"27em"}),{height:t.clientHeight,width:r,fullscreen:o}}resetFocusWrapper(){this.focusElement&&this.focusElement.remove(),this.focusWrapper.style.removeProperty("width"),this.focusWrapper.style.removeProperty("height"),this.focusWrapper.style.removeProperty("top"),this.focusWrapper.style.removeProperty("left"),this.focusWrapper.style.removeProperty("maxWidth")}getButtonClose(t){return z(this,void 0,void 0,(function*(){const e=yield c(this.baseUrl,this.locale,"ariaLabel.close"),i=document.createElement("button");return i.setAttribute("type","button"),i.setAttribute("aria-label",e),i.classList.add("close-button"),i.addEventListener("click",(()=>{this.close(t)})),i}))}render(t,e){return z(this,void 0,void 0,(function*(){const i="grade"===t.id;this.resetFocusWrapper(),this.focusElement=document.createElement("div"),this.focusElement.classList.add("focused-tile"),this.focusElement.classList.add(i?"focused-tile-grade":"focused-tile-review");const n=yield this.getButtonClose(e);this.focusElement.appendChild(n);const s=i?new M(this.context,t,p.FOCUSED,j.CENTERED):new F(this.context,t,p.FOCUSED,j.RELATIVE);s.classList.add("focused-tile-content"),this.focusElement.append(s),this.context.settings.focusWrapper.classList.add("focused-wrapper"),this.context.settings.focusWrapper.append(this.focusElement),this.focusElement.addEventListener("click",(t=>{t.stopImmediatePropagation()}))}))}};X=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-rc-focused-tile"})],X);var q=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))};let Y=class extends HTMLElement{constructor(){super(...arguments),this.ATTRIBUTE_BASE_URL="baseUrl",this.ATTRIBUTE_LOCALE="locale",this.ATTRIBUTE_RATING="rating",this.MIN_GRADE=0,this.MAX_GRADE=5}connectedCallback(){var t;return q(this,void 0,void 0,(function*(){this.baseUrl=this.getAttribute(this.ATTRIBUTE_BASE_URL)||"",this.locale=this.getAttribute(this.ATTRIBUTE_LOCALE)||"en-GB";const e=+(null!==(t=this.getAttribute(this.ATTRIBUTE_RATING))&&void 0!==t?t:0);this.validate(e)&&(yield this.render(e))}))}validate(t){return!(isNaN(t)||t<this.MIN_GRADE||t>this.MAX_GRADE)}render(t){return q(this,void 0,void 0,(function*(){const e=Math.floor(t),i=t%1*100,n='<div class="empty"></div>',r='<div class="filled"></div>',o=yield c(this.baseUrl,this.locale,"ariaLabel.starRating",{rating:s(this.locale,t,2,2)});this.innerHTML=`\n      <div class="star-rating" aria-label="${o}">\n        ${r.repeat(e)}\n        ${e!==this.MAX_GRADE?`\n              <div class="star-rating__fraction">\n                <div class="star">\n                  ${n}\n                </div>\n                <div class="star" style="width: ${i}%">\n                  ${r}\n                </div>\n              </div>\n              ${n.repeat(this.MAX_GRADE-e-1)}\n            `:""}\n      </div>\n    `}))}};Y=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-rc-star-rating"})],Y);class V{constructor(t=[],e=100){this._tiles=t,this.baseWidthInPercent=e,this.index=0,this._orderedTiles=[],this.setOrderedTiles()}init(t,e){return this.index=t,this.getPage(e)}readjust(t,e){return this.index=t,this.setOrderedTiles(),this.getPage(e)}setOrderedTiles(){this._orderedTiles=[],this._tiles.forEach(((t,e)=>{this._orderedTiles.push([e,t])}))}left(t){return this.incrementIndex(-1*t.wasAllowedToScroll),this.getPage(t)}right(t){return this.incrementIndex(t.wasAllowedToScroll),this.getPage(t)}incrementIndex(t){const e=this.index+t;e>=this._tiles.length?this.index=e-this._tiles.length:e<0?this.index=this._tiles.length+e:this.index+=t}getPage(t){const e=this.toEnd(t.visibleTiles),i=e<t.visibleTiles&&0!==e?e:t.visibleTiles,n=i/t.visibleTiles*this.baseWidthInPercent*-1+-this.baseWidthInPercent/t.visibleTiles,s=this.index,r=this.baseWidthInPercent/t.visibleTiles,o=s>=t.visibleTiles||0===s?t.visibleTiles:s,a=(t.visibleTiles+1-o)*r*-1;return{index:this.index,tiles:[...this.getCarouselTiles(this.index-t.visibleTiles-1,3*t.visibleTiles+2,t.visibleTiles)],allowedToScrollNext:i,allowedToScrollPrevious:o,toPrevious:a,toNext:n}}getCarouselTiles(t,e,i){let n=[...this._orderedTiles];const s=t%this._orderedTiles.length;n=[...n.splice(s),...n];const r=[];for(let t=0;t<e;t++){const t=n.shift();if(!t)throw new Error("no first item");r.push(t),n=[...n,t]}return r.slice(i+1,2*i+2).filter((t=>void 0!==t))}toEnd(t){return this._tiles.length-(this.index+t)}setTiles(t){this._tiles=t,this.setOrderedTiles()}getTiles(){return this._tiles}}var K;!function(t){t.XXLARGE="xxlarge",t.XLARGE="xlarge",t.LARGE="large",t.MEDIUM="medium",t.SMALL="small"}(K||(K={}));const Z=K;var J,Q=i(168),tt=i.n(Q);function et(t,e,i,n=p.REDUCED,s=0,r){return t?new M(e,i,n,j.CENTERED,r,s):new F(e,i,n,j.RELATIVE,r,s)}function it(t){const{grades:{"365days":{rating:e,count:i},overall:{count:n}}}=t.grade;return{id:"grade",grade:e,count:i,overallCount:n}}!function(t){t.LEFT="left",t.RIGHT="right"}(J||(J={}));var nt=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))};let st=class extends HTMLElement{constructor(){super(...arguments),this.allowedToScroll=!0,this.renderedTiles=new Map,this.rendered=!1}connectedCallback(){return nt(this,void 0,void 0,(function*(){const t=this.getRootNode();this.host=t.host,this.context=this.host.getContext(),this.baseUrl=this.context.baseUrl,this.locale=this.context.settings.locale,this.rendered?yield this.update():(this.carouselController=new V(this.context.reviews,100),this.page=this.carouselController.init(0,{visibleTiles:3,wasAllowedToScroll:0}),yield this.render(),this.rendered=!0,R(this,1,["ArrowLeft",this.getNavigationCallBack(J.LEFT)],["ArrowRight",this.getNavigationCallBack(J.RIGHT)]),_(this,".control-button.left"),_(this,".control-button.right")),this.carouselManager=this.initCarouselManager(),this.initCarouselGestures()}))}disconnectedCallback(){this.carouselManager.off("swipeleft"),this.carouselManager.off("swiperight"),(t=>{var e;const i=E(t);i&&(null===(e=i.children)||void 0===e||e.forEach((t=>{const e=g.get(t);e&&S(e.element)})),S(t))})(this)}getNavigationCallBack(t){return()=>{this.scrollCarousel(t)}}update(t=!1){var e,i,n,s,r,o;return nt(this,void 0,void 0,(function*(){if(!(null===(i=null===(e=this.carouselWrapper)||void 0===e?void 0:e.parentElement)||void 0===i?void 0:i.parentElement))return void console.warn("carouselWrapper is not initialized yet.");const a=null!==(s=null===(n=this.displaySettings)||void 0===n?void 0:n.visibleTiles)&&void 0!==s?s:0,l=null!==(o=null===(r=this.displaySettings)||void 0===r?void 0:r.displaySize)&&void 0!==o?o:0;return this.displaySettings=function(t){switch(!0){case t>=1360:return{displaySize:Z.XXLARGE,visibleTiles:5};case t>=1102:return{displaySize:Z.XLARGE,visibleTiles:4};case t>=860:return{displaySize:Z.LARGE,visibleTiles:3};case t>=600:return{displaySize:Z.MEDIUM,visibleTiles:2};default:return{displaySize:Z.SMALL,visibleTiles:1}}}(this.carouselWrapper.parentElement.parentElement.offsetWidth),a!==this.displaySettings.visibleTiles||l!==this.displaySettings.displaySize||t?(this.page=this.carouselController.readjust(0,{visibleTiles:this.displaySettings.visibleTiles,wasAllowedToScroll:this.displaySettings.visibleTiles}),this.context=this.host.getContext(),void(yield this.updateTiles())):void 0}))}scrollCarousel(t){return nt(this,void 0,void 0,(function*(){if(!this.allowedToScroll)return;this.allowedToScroll=!1;const e=this.carouselController[t]({wasAllowedToScroll:t===J.LEFT?this.page.allowedToScrollPrevious:this.page.allowedToScrollNext,visibleTiles:this.displaySettings.visibleTiles});this.currentTransition=t===J.LEFT?-100:0;const i=yield this.renderTiles(e,!1,this.page,t),n=2*this.displaySettings.visibleTiles+1-i,s=t===J.LEFT?0:0===n?-100:100/this.displaySettings.visibleTiles*(this.displaySettings.visibleTiles-n)*-1;yield this.updatePage(e,s),this.allowedToScroll=!0}))}updatePage(t,e){return nt(this,void 0,void 0,(function*(){this.page=t,this.currentTransition=yield this.moveTiles(this.currentTransition,e)}))}resetTiles(t=this.page,e=!1){return nt(this,void 0,void 0,(function*(){this.renderTiles(t,e),this.currentTransition=yield this.moveTiles(0,0,!1)}))}renderTiles(t=this.page,e=!1,i,n){return nt(this,void 0,void 0,(function*(){const s=[...new Set(n||i?n===J.LEFT?[...t.tiles,...i.tiles]:[...i.tiles,...t.tiles]:t.tiles)].map((([t,i])=>{if(this.renderedTiles.has(t)&&!e){const e=this.renderedTiles.get(t);return e.updateSize(this.displaySettings.displaySize),e}const n=function(t,e,i,n,s=0){return et(t,e,i,p.REDUCED,s,n)}("grade"===i.id,this.context,i,this.displaySettings.displaySize,t);return this.renderedTiles.set(t,n),n}));return this.carouselWrapper.replaceChildren(...s),this.isTileFullyVisible(s,n),s.length}))}updateTiles(){var t;return nt(this,void 0,void 0,(function*(){const e=this.context.reviews,i=it(this.context),n=this.context.settings.fixedGradeBlock?e:[i,...e];this.carouselController.setTiles(n),this.page=this.carouselController.init(null!==(t=this.page.index)&&void 0!==t?t:0,{visibleTiles:this.displaySettings.visibleTiles,wasAllowedToScroll:0}),yield this.resetTiles(this.page,!0)}))}moveTiles(t,e,i=!0){return nt(this,void 0,void 0,(function*(){const n=this.carouselWrapper.animate([{left:`${t}%`},{left:`${e}%`}],{duration:i?this.context.settings.animationDurationScroll:0,easing:"ease",fill:"both"});return yield n.finished,e}))}isTileFullyVisible(t,e=J.LEFT){const i=e===J.LEFT?0:t.length-this.displaySettings.visibleTiles-1,n=i+this.displaySettings.visibleTiles;t.forEach((t=>(x(t,-1),t.classList.remove("clickable")))),t.slice(i,n).forEach((t=>{x(t,2),t.classList.add("clickable")}))}initCarouselManager(){const t=new(tt().Manager)(this.carouselWrapper),e=new(tt().Swipe)({direction:tt().DIRECTION_HORIZONTAL});return t.add(e),t}initCarouselGestures(){void 0!==this.carouselManager&&(this.carouselManager.on("swipeleft",(()=>{this.scrollCarousel(J.RIGHT)})),this.carouselManager.on("swiperight",(()=>{this.scrollCarousel(J.LEFT)})))}getButtons(t){return nt(this,void 0,void 0,(function*(){const e=yield c(this.baseUrl,this.locale,`ariaLabel.${t}Chevron`),i=document.createElement("button");return i.classList.add("control-button",t),i.setAttribute("aria-label",e),i.innerHTML="<span></span>",i.addEventListener("click",(()=>{this.scrollCarousel(t)})),i}))}render(){return nt(this,void 0,void 0,(function*(){this.classList.add("carousel");const t=yield this.getButtons(J.LEFT),e=yield this.getButtons(J.RIGHT),i=document.createElement("div");i.classList.add("carousel-scroll-wrapper"),this.appendChild(t),this.appendChild(i),this.appendChild(e);const n=document.createElement("div");n.classList.add("carousel-items"),this.carouselWrapper=n,this.querySelector(".carousel-scroll-wrapper").appendChild(n)}))}};st=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-rc-carousel"})],st);var rt;!function(t){t.LIGHT="light",t.DARK="dark",t.OS="os"}(rt||(rt={}));const ot=rt;var at;!function(t){t.DEFAULT="default",t.INHERIT="inherit"}(at||(at={}));const lt=at;i(94);const ct=t=>e=>{customElements.get(t.selector)||customElements.define(t.selector,e)};let ht=class extends HTMLElement{ATTRIBUTE_BASE_URL="baseUrl";ATTRIBUTE_LOCALE="locale";locale;baseUrl;ATTRIBUTE_RATING="rating";MIN_GRADE=0;MAX_GRADE=5;translateContent;async connectedCallback(){this.baseUrl=this.getAttribute(this.ATTRIBUTE_BASE_URL)||"",this.locale=this.getAttribute(this.ATTRIBUTE_LOCALE)||"",this.translateContent=c.bind(this,this.baseUrl,this.locale);const t=+(this.getAttribute(this.ATTRIBUTE_RATING)??0);this.validate(t)&&await this.render(t)}validate(t){return!(isNaN(t)||t<this.MIN_GRADE||t>this.MAX_GRADE)}async render(t){const e=Math.floor(t),i=t%1*100,n='<div class="empty"></div>',s='<div class="filled"></div>',r=await this.translateContent("review.ratingAriaLabel",{rating:t.toString()});this.innerHTML=`\n      <div class="star-rating" aria-label="${r}">\n        ${s.repeat(e)}\n        ${e!==this.MAX_GRADE?`\n              <div class="star-rating__fraction">\n                <div class="star">\n                  ${n}\n                </div>\n                <div class="star" style="width: ${i}%">\n                  ${s}\n                </div>\n              </div>\n              ${n.repeat(this.MAX_GRADE-e-1)}\n            `:""}\n      </div>\n    `}};ht=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([ct({selector:"etrusted-ig-star-rating"})],ht);const dt=(t,e,i="lazy",n)=>`<img src="${t}/assets/images/${e}.svg" loading="${i}" ${n?`class="${n}"`:""} />`,ut="data-key-nav",pt=new Map;let vt=0;const ft=(t,e="")=>t.getAttribute(ut)??e,mt=t=>pt.get(ft(t))??void 0,gt=(t,e,...i)=>{const n={element:t,tabIndex:e,callback:new Map([...i])},s=ft(t,vt.toString());return t.setAttribute(ut,`${s}`),pt.set(`${s}`,n),vt+=1,n},Tt=t=>{pt.set(ft(t.element),t)},yt=(t,e=0)=>{t.setAttribute("tabindex",`${e}`)},Et=(t,e)=>{requestAnimationFrame((()=>{const i=(t=>Number(t.getAttribute("tabindex")??0))(t);yt(t,-1),t.contentEditable="true",t.focus(),yt(t,e??i),t.contentEditable="false"}))},bt=(t,e)=>["Enter",()=>{e&&e(),t.click()}],wt=(t,e=1,...i)=>{((t,e,...i)=>{const n=i.length>0?i:[bt(t)];gt(t,e,...n),yt(t,e),(t=>{const e=mt(t);if(!e||void 0===e.callback)return;const i=t=>{e.callback?.has(t.key)&&(t.preventDefault(),t.stopPropagation(),(t=>{try{if(!t)return;return t()}catch(t){console.log("error: ",t)}})(e.callback.get(t.key)))};e.eventListener=[()=>{t.addEventListener("keydown",i)},()=>{t.removeEventListener("keydown",i)}],t.addEventListener("focus",e.eventListener[0]),t.addEventListener("focusout",e.eventListener[1]),Tt(e)})(t)})(t,e,...i)},At=(t,e)=>{let i=Array.from(t.querySelectorAll(e));return 0===i.length&&(i=Array.from(t.shadowRoot?.querySelectorAll(e)??[])),i},Ct=(t,e,i=1,...n)=>{const s=mt(t);s&&((t,e,i,n="key",...s)=>{At(t.element,e).forEach((e=>{"hover"===n?((t,e=1,...i)=>{gt(t,e,...i),yt(t,e),(t=>{const e=mt(t);e&&(e.eventListener=[()=>{t.dispatchEvent(new Event("mouseenter"))},()=>{t.dispatchEvent(new Event("mouseleave"))}],t.addEventListener("focus",e.eventListener[0]),t.addEventListener("focusout",e.eventListener[1]),Tt(e))})(t)})(e,i,...s):wt(e,i,...s),t.children=[...t.children??[],ft(e,"")]})),Tt(t)})(s,e,i,"key",...n)};let Lt=class extends HTMLElement{ATTRIBUTE_BASE_URL="baseUrl";ATTRIBUTE_LOCALE="locale";ATTRIBUTE_TABINDEX="data-parent-tabindex";locale;baseUrl;tabindex;wrapperElement;reviewWrapperElement;indicatorElement;dotSlider;slides;observer;referenceElement;_data;currentIndex=0;imageCount=0;translateContent;get data(){return this._data}set data(t){this._data=t,this.imageCount=this._data.review.images.length,this.render().then((()=>{this.initKeyNavigation()}))}connectedCallback(){this.baseUrl=this.getAttribute(this.ATTRIBUTE_BASE_URL)||"",this.locale=this.getAttribute(this.ATTRIBUTE_LOCALE)||"",this.translateContent=c.bind(this,this.baseUrl,this.locale)}disconnectedCallback(){this.unobserveSlideVisibility()}initKeyNavigation(){requestAnimationFrame((()=>{const t=Number(this.getAttribute(this.ATTRIBUTE_TABINDEX)||"1");this.tabindex=t;const e=this.tabindex+1,i=e+1,n=this.wrapperElement.firstElementChild.clientWidth;if(0!==n){if(wt(this,-1),Ct(this,"button.close",e),Ct(this,".report-button",i),n>=700){const t=".review-wrapper > .thumbnails > img.thumbnail";Ct(this,"button.previous",i),Ct(this,"button.next",i),Ct(this,t,i)}else Ct(this,".close-overlay",i),Ct(this,".slides",i),Ct(this,".review",i),Ct(this,"a",i);(()=>{const t=mt(this);if(t&&t.children?.length&&t.children?.length>2){const e=t.children.filter((t=>{const e=pt.get(t);return!!e&&"none"!==getComputedStyle(e.element).display})),i=pt.get(e.shift()),n=pt.get(e.pop());n?.element.addEventListener("keydown",(t=>{"Tab"!==t.key||t.shiftKey||requestAnimationFrame((()=>{Et(i.element)})),"Tab"===t.key&&t.shiftKey&&requestAnimationFrame((()=>{const t=pt.get(e.pop());t&&Et(t.element)}))})),i.element.addEventListener("keydown",(t=>{"Tab"===t.key&&t.shiftKey&&n&&Et(n.element)}))}})()}}))}show(t=0,e){var i;e&&(this.referenceElement=e),this.currentIndex=t,this.wrapperElement.classList.add("show"),this.scrollToSlide(this.currentIndex),this.initKeyNavigation(),i=this,requestAnimationFrame((()=>{const t=At(i,"button.close");if(0===t.length)return;const e=t.filter((t=>"none"!==getComputedStyle(t).display));0!==e.length&&Et(e.shift())}))}hide(){this.wrapperElement.classList.remove("show"),Et(this.referenceElement??this.parentElement)}showOverlay(t){var e;this.reviewWrapperElement.classList.add("overlay"),e=this.reviewWrapperElement.querySelector("button.close-overlay"),Et(e,undefined),e.addEventListener("keydown",(t=>{"Tab"===t.key&&Et(e)})),t.stopPropagation()}hideOverlay(t){this.reviewWrapperElement.classList.remove("overlay"),t.stopPropagation()}scrollToSlide(t=0){const e=this.querySelector(`#slide-${t}`);e&&e.scrollIntoView()}previousSlide(){this.currentIndex=this.currentIndex>0?this.currentIndex-1:this.imageCount-1,this.scrollToSlide(this.currentIndex)}nextSlide(){this.currentIndex=this.currentIndex<this.imageCount-1?this.currentIndex+1:0,this.scrollToSlide(this.currentIndex)}async reportImage(t){const{channel:e,review:i}=this.data,n=i.id,s=new Date(i.date).toLocaleString("en-GB").substring(0,10),r=await this.translateContent("report.body"),o="-".repeat(40),a=e?`${e.tsId} / ${n} / ${t.id} / ${e.name}`:`${n} / ${t.id}`,l=`${t.url}\n${i.comment||""}`,c=`${i.rating}/5 - ${s}`,h=await this.translateContent("report.subject",{imageId:t.id}),d=`${r}\n\n${o}\n${a}\n\n${l}\n\n${c}`;window.open(`mailto:reviewservice@trustedshops.com?subject=${h}&body=${encodeURIComponent(d)}`)}observeSlideVisibility(){this.slides=this.querySelectorAll(".slide"),this.observer=new IntersectionObserver((t=>{t.forEach((t=>{t.intersectionRatio>=.5&&(this.currentIndex=+t.target.id.split("-")[1],this.updateIndicator(this.currentIndex),this.updateThumbnailStyle(this.currentIndex),this.updateDotSlider(this.currentIndex))}))}),{threshold:.5}),this.slides.forEach((t=>{this.observer.observe(t)}))}unobserveSlideVisibility(){this.slides.forEach((t=>{this.observer.unobserve(t)})),this.observer.disconnect()}async updateIndicator(t=0){this.indicatorElement.innerHTML=await this.translateContent("gallery.of",{current:(t+1).toString(),total:this.imageCount.toString()})}updateDotSlider(t=0){Array.from(this.dotSlider.children).forEach(((e,i)=>{e.classList.remove("dot-highlighted"),i===t&&e.classList.add("dot-highlighted")}))}updateThumbnailStyle(t=0){this.querySelectorAll(".thumbnail").forEach(((e,i)=>{e.classList.remove("active"),i===t&&(e.classList.add("active"),e.scrollIntoView())}))}async getImageSlider(){const{images:t}=this.data.review,e=await this.translateContent("gallery.leftChevronAriaLabel"),i=await this.translateContent("gallery.rightChevronAriaLabel"),n=await this.translateContent("gallery.imageAltText");return`<div class="image-slider">\n      <button\n        type="button"\n        class="previous navigation mobile-hide"\n        onclick="this.parentNode.parentNode.parentNode.parentNode.parentNode.previousSlide()"\n        aria-label="${e}"\n      >\n        ${dt(this.baseUrl,"chevron-left")}\n      </button>\n      <div class="slides">\n        ${t.map(((t,e)=>`<img id="slide-${e}" class="slide" src="${t.url}" alt="${n} ${e+1}"/>`)).join("")}\n      </div>\n      <button\n        type="button"\n        class="next navigation mobile-hide"\n        onclick="this.parentNode.parentNode.parentNode.parentNode.parentNode.nextSlide()"\n        aria-label="${i}"\n      >\n        ${dt(this.baseUrl,"chevron-right")}\n      </button>\n    </div>`}async getReview(){const{title:t,comment:e,consumer:i,rating:n,date:s,isVerified:r}=this.data.review,o=await this.translateContent("review.noUserComment"),a=await this.translateContent("review.writtenBy"),l=await this.translateContent("review.verified"),c=await this.translateContent("imported.long"),h=await this.translateContent("review.readMore"),d=!!t||!!e,u=i&&i.firstName,p=!!t&&!((t,e)=>!(!t||!e)&&t.startsWith(e?.substring(0,e.length-3)))(e,t);return`<div class="review" onclick="event.stopPropagation()">\n      <div class="row justify-center sticky-top close-overlay-wrapper">\n        <div class="col-auto">\n          <button type="button" class="close-overlay">\n            <div class="close-icon">&#x2715;</div>\n          </button>\n        </div>\n      </div>\n      <div\n        class="header"\n        onclick="this.parentNode.parentNode.parentNode.parentNode.parentNode.showOverlay(event)"\n      >\n        <div class="row align-center">\n          <div class="col rating">\n            <etrusted-ig-star-rating\n              rating="${n}"\n              baseUrl="${this.baseUrl}"\n              locale="${this.locale}"\n            ></etrusted-ig-star-rating>\n          </div>\n          ${r?`<div class="col-auto verified">\n                  <span></span> ${l}\n                </div>`:`<div class="col-auto imported">\n                  ${c}\n                </div>`}\n        </div>\n        <div class="row">\n          <div class="col relative-time">\n            ${((t,e)=>{const i=new Intl.RelativeTimeFormat(t,{numeric:"auto"}),n=new Date,s=new Date(e),r=s.getTime()-n.getTime(),o=Math.trunc(r/1e3),a=Math.abs(o);let l=o,c="second";if(a>=60&&a<3600)l=Math.trunc(o/60),c="minute";else if(a>3600&&a<86400)l=Math.trunc(o/3600),c="hour";else if(a>=86400&&a<604800)l=Math.trunc(o/86400),c="day";else if(a>604800)return s.toLocaleDateString(t);return i.format(l,c)})(this.locale,s)}\n            ${u?`${a} ${i?.firstName||""}\n            ${i?.lastName||""}`:""}\n          </div>\n          <a class="col-auto mobile-show read-more">${h}</a>\n        </div>\n      </div>\n      <div class="row content mobile-hide">\n        <div class="col">\n          ${d?`\n              ${p?`<div class="title">${t||""}</div>`:""}\n              <div class="comment">${e||""}</div>\n            `:`<div class="disclaimer">${o}</div>`}\n        </div>\n      </div>\n    </div>`}async getThumbnails(){const{images:t}=this.data.review,e=await this.translateContent("gallery.imageAltText");return`<div class="thumbnails mobile-hide">\n      ${t.map(((t,i)=>`<img\n            class="thumbnail"\n            src="${t.url}"\n            alt="${e} ${i+1}"\n            onclick="this.parentNode.parentNode.parentNode.parentNode.parentNode.scrollToSlide(${i})"\n          />`)).join("")}\n    </div>`}async getInformationBar(){const t=await this.translateContent("gallery.closeAriaLabel"),e=await this.translateContent("gallery.reportAriaLabel"),i=await this.translateContent("report.link");return` <div class="information-bar row align-center">\n      <div class="col">\n        <button type="button" class="close mobile-show" aria-label="${t}">\n          <div class="close-icon">&#x2715;</div>\n        </button>\n      </div>\n      <div class="col text-center indicator">\n        ${this.currentIndex+1} of ${this.imageCount}\n      </div>\n      <div class="col">\n        <div class="row justify-right">\n          <div class="col-auto">\n            <a class="report-button" href="javascript:void(0)" aria-label="${e}">\n              <span class="mobile-hide"> ${i} </span>\n              <span class="report-icon mobile-show">\n              </span>\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>`}async render(){const t=await this.translateContent("gallery.closeAriaLabel");this.innerHTML=`\n      <div class="modal-wrapper" onclick="this.parentNode.hide()">\n        <div class="modal row" onclick="event.stopPropagation()">\n          <div class="gallery-wrapper">\n            ${await this.getImageSlider()}\n            <div class="dot-slider mobile-show">\n              ${'<span class="dot"></span>'.repeat(this.imageCount)}\n            </div>\n            ${await this.getInformationBar()}\n          </div>\n          <div class="review-wrapper">\n            <div class="row justify-right mobile-hide">\n              <div class="col-auto">\n                <button  type="button" class="close">\n                  <div class="close-icon" aria-label="${t}"></div>\n                </button>\n              </div>\n            </div>\n            ${await this.getReview()}\n            ${await this.getThumbnails()}\n          </div>\n        </div>\n      </div>\n    `;const e=this.querySelector(".modal-wrapper");e&&(this.wrapperElement=e);const i=this.querySelector(".indicator");i&&(this.indicatorElement=i);const n=this.querySelector(".review-wrapper");n&&(this.reviewWrapperElement=n,this.reviewWrapperElement.onclick=t=>this.hideOverlay(t));const s=this.querySelector(".dot-slider");s&&(this.dotSlider=s);const r=this.querySelector(".report-button");r&&(r.onclick=()=>this.reportImage(this.data.review.images[this.currentIndex])),this.querySelectorAll(".close").forEach((t=>t.onclick=()=>this.hide()));const o=this.querySelector(".close-overlay");o&&(o.onclick=t=>this.hideOverlay(t)),this.observeSlideVisibility()}};Lt=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([ct({selector:"etrusted-ig-modal"})],Lt);let xt=class extends HTMLElement{alwaysUpdate;outsideModal;ATTRIBUTE_LOCALE="data-locale";ATTRIBUTE_BASE_URL="data-base-url";ATTRIBUTE_ACCENT_COLOR="data-accent-color";ATTRIBUTE_TABINDEX="tabindex";PAGE_SIZE=4;locale;baseUrl;tabindex;modalElement;rootElement;_data;initialRender=!1;get data(){return this._data}set data(t){this._data=t,this.render()}constructor(t=!1,e){super(),this.alwaysUpdate=t,this.outsideModal=e}connectedCallback(){if(!this.initialRender){this.locale=this.getAttribute(this.ATTRIBUTE_LOCALE)||"",this.baseUrl=this.getAttribute(this.ATTRIBUTE_BASE_URL)||"",this.tabindex=this.getAttribute(this.ATTRIBUTE_TABINDEX)||"1",this.translateContent=c.bind(this,this.baseUrl,this.locale);const t=this.getAttribute(this.ATTRIBUTE_ACCENT_COLOR)||"";if(!this.locale||!this.baseUrl)throw new Error("'data-locale' and 'data-base-url' need to be provided");this.attachShadow({mode:"open"}),this.rootElement=this.addRootElement(),this.addCssStyle(this.baseUrl),this.changeAccentColor(t),this.render(),wt(this,Number(this.tabindex),["Enter",()=>this.showModal(0,this)])}this.initialRender=!this.alwaysUpdate}showModal(t,e){this.modalElement.show(t,e)}translateContent;changeAccentColor(t){t&&this.style.setProperty("--accent-color",t)}addCssStyle(t){const e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=`@import "${t}/index.css"`,this.shadowRoot?.appendChild(e)}addRootElement(){const t=document.createElement("div");return t.classList.add("widget-image-gallery"),t.style.height="4.25em",t.style.display="flex",t.style.overflow="hidden",t.style.gap="0.5em",t.style.fontFamily="Helvetica, arial, sans-serif",t.style.fontSize="0.875em",this.shadowRoot?.appendChild(t),t}async render(){if(!this.data)return;const{review:t}=this.data,{images:e}=t,i=e.length>=this.PAGE_SIZE;let n="gallery.imageAltText",s="gallery.showMoreAriaLabel";try{n=await this.translateContent(n),s=await this.translateContent(s)}catch(t){}this.rootElement.innerHTML=`\n      ${e.slice(0,this.PAGE_SIZE).map(((t,e)=>`<img\n              style="height:100%"\n              class="thumbnail"\n              src="${t.url}"\n              loading="lazy"\n              onclick="this.getRootNode().host.showModal(${e})"\n              alt="${n} ${e+1}"\n            />`)).join("")}\n      ${i?`<div class="remaining-count" onclick="this.getRootNode().host.showModal(0)">\n              <div aria-label="${s}">+${e.length-this.PAGE_SIZE}</div>\n            </div>`:""}\n    `,this.modalElement||(this.outsideModal?this.modalElement=this.outsideModal:(this.modalElement=document.createElement("etrusted-ig-modal"),this.modalElement.setAttribute("baseUrl",this.baseUrl),this.modalElement.setAttribute("locale",this.locale),this.modalElement.setAttribute("data-parent-tabindex",this.tabindex))),this.outsideModal||this.rootElement.append(this.modalElement),this.modalElement.data={review:this.data.review}}};xt=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([ct({selector:"etrusted-widget-image-gallery"})],xt);var Rt,St=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))};let It=Rt=class extends HTMLElement{constructor(){super(...arguments),this.CURRENT_MAJOR_VERSION="v1",this.QUERY_SELECTOR_PROPS='script[type="text/props"]',this.ATTRIBUTE_LOCALE="data-etrusted-locale",this.ATTRIBUTE_FONT_STYLE="data-font-style",this.ATTRIBUTE_THEME="data-theme",this.ATTRIBUTE_UGC="data-ugc",this.ATTRIBUTE_ACCENT_COLOR="data-accent-color",this.DEFAULT_ACCENT_COLOR="#DB6B22",this.DEFAULT_ACCENT_COLOR_DARK_MODE="#FF8700",this.breakPoint=590,this.osThemeHost=window.matchMedia("(prefers-color-scheme: dark)"),this.resized=!1,this.themeListener=t=>{this.setToOsStyle(t.matches)},this.setToOsStyle=t=>{this.setAttribute(this.ATTRIBUTE_THEME,t?"dark":"light"),this.changeAccentColor()},this.getManifest=()=>{var t;const e=null===(t=this.querySelector(this.QUERY_SELECTOR_PROPS))||void 0===t?void 0:t.textContent;return e?JSON.parse(e).manifest:null}}connectedCallback(){var t,e;return St(this,void 0,void 0,(function*(){const i=(null===(t=this.getRootNode())||void 0===t?void 0:t.host)||this,n=this.getAttribute(this.ATTRIBUTE_LOCALE),s=this.getAttribute(this.ATTRIBUTE_THEME),r=this.getAttribute(this.ATTRIBUTE_ACCENT_COLOR)||"",o=this.getAttribute(this.ATTRIBUTE_FONT_STYLE),a=this.getAttribute(this.ATTRIBUTE_UGC),l="true"===a,h=this.getManifest();if(!h)return;const u=h.application.url.replace(this.CURRENT_MAJOR_VERSION,"1.19.3")||".";this.attachShadow({mode:"open"}),this.addCssStyle(u),this.rootElement=this.addRootElement();const p=d(h.configuration.url),v=d(h.feeds.channels.url),f=d(h.feeds.grades.url),m=d(h.feeds.review_carousel_service.url),g=yield(()=>St(this,void 0,void 0,(function*(){try{const[t,e,i,n]=yield Promise.all([p,v,f,m]),{locale:s,theme:r,showUGC:o,fontStyle:a,accentColor:l,variant:c}=t;return{channel:e,grade:i,reviews:n,variant:c,configurationLocale:s,configurationTheme:r,configurationShowUGC:o,configurationFontStyle:a,configurationAccentColor:l}}catch(t){return}})))();if(!g)return;const{configurationLocale:T,configurationTheme:y,configurationShowUGC:E,configurationFontStyle:b,configurationAccentColor:w,variant:A,channel:C,grade:L,reviews:x}=g;if(x.length<5)return;yield c(u,null!=n?n:T,"verifiedCopy");const[R,S]=Rt.initBaseElements(),I={variant:A,theme:null!==(e=null!=s?s:y)&&void 0!==e?e:ot.LIGHT,locale:null!=n?n:T,showUGC:(a?l:E)||!1,fontStyle:o||b||lt.DEFAULT,accentColor:r||w||this.DEFAULT_ACCENT_COLOR,focusWrapper:R,animationDurationScroll:750,animationDurationFocus:75,fixedGradeBlock:!1};this.context={baseUrl:u,manifest:h,channel:C,grade:L,reviews:x,settings:I},this.setAttribute(this.ATTRIBUTE_THEME,this.context.settings.theme),this.setAttribute(this.ATTRIBUTE_FONT_STYLE,this.context.settings.fontStyle),yield this.render(S,R),this.changeAccentColor(),this.setupResizeObserver(this.rootElement,S),this.setupMutationObserver(i,S,R),this.handleOSStyleListener(this.context.settings.theme!==ot.OS)}))}disconnectedCallback(){this.handleOSStyleListener(!0)}getNormalizedAccentColor(t=this.DEFAULT_ACCENT_COLOR){var e,i;const n=t.toLowerCase()===this.DEFAULT_ACCENT_COLOR.toLowerCase()||t.toLowerCase()===this.DEFAULT_ACCENT_COLOR_DARK_MODE.toLowerCase(),s=null!==(e=this.getAttribute(this.ATTRIBUTE_THEME))&&void 0!==e?e:null===(i=this.context.settings)||void 0===i?void 0:i.theme;return n?s===ot.DARK?this.DEFAULT_ACCENT_COLOR_DARK_MODE:this.DEFAULT_ACCENT_COLOR:t}changeAccentColor(){var t;const e=null!==(t=this.getAttribute(this.ATTRIBUTE_ACCENT_COLOR))&&void 0!==t?t:this.context.settings.accentColor,i=this.getNormalizedAccentColor(e||this.DEFAULT_ACCENT_COLOR);this.context.settings.accentColor=i,this.style.setProperty("--accent-color",i)}static initBaseElements(){return[new X,new st]}setupMutationObserver(t,e,i){const n=new MutationObserver((n=>{if(t!==this){let s=!1;n.forEach((e=>{const i=e.attributeName,n=t.getAttribute(i);if(i===this.ATTRIBUTE_THEME&&n){const t=this.context.settings.theme;this.context.settings.theme=n,this.setAttribute(this.ATTRIBUTE_THEME,n),this.handleOSStyleListener(ot.OS===t||ot.OS!==this.context.settings.theme),this.changeAccentColor()}if(i===this.ATTRIBUTE_LOCALE&&(this.context.settings.locale=n,this.setAttribute(this.ATTRIBUTE_LOCALE,n),s=!0),i===this.ATTRIBUTE_FONT_STYLE&&(this.context.settings.fontStyle=n,this.setAttribute(this.ATTRIBUTE_FONT_STYLE,n),s=!0),i===this.ATTRIBUTE_ACCENT_COLOR&&(this.context.settings.accentColor=n,this.setAttribute(this.ATTRIBUTE_ACCENT_COLOR,n),this.changeAccentColor(),s=!0),i===this.ATTRIBUTE_UGC){const t="true"===n;this.context.settings.showUGC=t,this.setAttribute(this.ATTRIBUTE_UGC,n),s=!0}})),s&&(this.render(e,i),e.update(!0))}}));return n.observe(t,{attributes:!0}),n}setupResizeObserver(t,e){const i=new ResizeObserver((()=>{e.allowedToScroll||this.resized?this.updateCarouselSettings(e):setTimeout((()=>{this.updateCarouselSettings(e),this.resized=!0}),this.context.settings.animationDurationScroll)}));return i.observe(t),i}handleOSStyleListener(t=!1){if(this.context.settings.theme===ot.OS||!t)return this.setToOsStyle(this.osThemeHost.matches),void this.osThemeHost.addEventListener("change",this.themeListener);this.osThemeHost.removeEventListener("change",this.themeListener)}getContext(){return this.context}setContext(t){this.context=t}addCssStyle(t){var e;const i=document.createElement("style");i.setAttribute("type","text/css"),i.innerHTML=`@import "${t}/index.css"`,null===(e=this.shadowRoot)||void 0===e||e.appendChild(i)}addRootElement(){var t;const e=document.createElement("div");return e.classList.add("etrusted-review-carousel-service-widget"),null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),e}updateCarouselSettings(t){this.context.settings.fixedGradeBlock=this.rootElement.offsetWidth>this.breakPoint,this.handleFixedGradeBlock(),t.update()}handleFixedGradeBlock(){const t=this.rootElement.querySelector(".widget > etrusted-rc-carousel-grade-tile");t&&(t.style.display=this.context.settings.fixedGradeBlock?"flex":"none")}render(t,e){return St(this,void 0,void 0,(function*(){if(!this.shadowRoot)return;const i=function(t,e=p.REDUCED){return et(!0,t,it(t),e)}(this.context,p.REDUCED);this.widgetElement&&this.widgetElement.remove(),this.context.settings.showUGC&&(this.context.settings.focusGallery=document.createElement("etrusted-ig-modal"),this.context.settings.focusGallery.setAttribute("baseUrl",this.context.baseUrl),this.context.settings.focusGallery.setAttribute("locale",this.context.settings.locale)),this.widgetElement=document.createElement("div"),this.widgetElement.classList.add("widget"),this.widgetElement.appendChild(i),this.widgetElement.appendChild(t),this.widgetElement.appendChild(e),this.context.settings.focusGallery&&this.widgetElement.append(this.context.settings.focusGallery),this.rootElement.appendChild(this.widgetElement),this.widgetElement.setAttribute("tabindex","0"),this.updateCarouselSettings(t)}))}};It=Rt=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([h({selector:"etrusted-review-carousel-service-widget"})],It)})()})();