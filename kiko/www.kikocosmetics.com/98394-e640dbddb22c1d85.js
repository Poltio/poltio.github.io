(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98394],{14150:function(e,t,o){"use strict";o.d(t,{Z:function(){return R}});var r=o(85893),i=o(67294),n=o(66530),c=o(7299),l=o(77477);o(64172);var a=o(81501),d=o(5646),s=o(36492),u=o(94184),p=o.n(u),_=o(14640),h=o(50067),v=o(22546),m=o(92544),g=o(67378),x=o(3685),k=o(65550),b=o(72936),f=o(67118),j=o.n(f),C=o(25675),N=o.n(C),S=o(59334),w=o(73622),P=o.n(w);function I(e){var t,o;let i=(0,_.useTranslations)(),n=null===(t=e.product.product_media)||void 0===t?void 0:t.primary_image,c=k.Z.getProductDroplet(null===(o=e.product.product_media)||void 0===o?void 0:o.media);return(0,r.jsxs)("div",{className:P().container,children:[(0,r.jsx)("div",{className:P().imageContainer,children:(0,r.jsx)(N(),{src:(null==n?void 0:n.url)||S.Z.transparentPixel,alt:e.product.display_value,width:80,height:80,loader:S.Z.evaImageLoader})}),(0,r.jsxs)("div",{className:P().infoContainer,children:[(0,r.jsx)("p",{className:P().productName,children:e.product.display_value}),(0,r.jsx)("div",{className:P().colorContainer,children:e.product.color&&"N/A"!==e.product.color&&(null==c?void 0:c.url)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N(),{src:(null==c?void 0:c.url)||S.Z.transparentPixel,alt:e.product.color||"",width:12,height:12,className:P().colorImage,loader:S.Z.evaImageLoader}),(0,r.jsx)("p",{className:P().colorName,children:e.product.color})]}):null}),e.onSelect&&(e.currentSelection===e.product.product_id?(0,r.jsxs)("div",{className:P().checked,children:[(0,r.jsx)("p",{children:i("generic.cart.selected_gift")}),(0,r.jsx)(b.Z,{name:"done",width:16,height:16})]}):(0,r.jsx)("button",{className:P().unchecked,onClick:()=>{var t;return null===(t=e.onSelect)||void 0===t?void 0:t.call(e,e.product.product_id)},children:(0,r.jsx)("p",{children:i("generic.cart.unselected_gift")})}))]})]})}var D=o(58461),y=o(36619),T=o(5017),Z=o.n(T);function A(e){var t,o;let n=(0,_.useTranslations)(),[c,l]=(0,i.useState)(!1),[a,d]=(0,i.useState)(()=>{var t;return e.currentSelection&&e.product.children.find(t=>t.product_id===e.currentSelection)?e.currentSelection:null===(t=e.product.children[0])||void 0===t?void 0:t.product_id}),s=e.product.children.find(e=>e.product_id===a),u=null==s?void 0:null===(t=s.product_media)||void 0===t?void 0:t.primary_image,p=k.Z.getProductDroplet(null==s?void 0:null===(o=s.product_media)||void 0===o?void 0:o.media),h=(0,i.useMemo)(()=>e.product.children.sort((t,o)=>e.currentSelection?t.product_id===e.currentSelection?-1:o.product_id===e.currentSelection?1:0:0),[e.product.children,e.currentSelection]);return(0,r.jsxs)("div",{className:P().container,children:[(0,r.jsx)("div",{className:P().imageContainer,children:(0,r.jsx)(N(),{src:(null==u?void 0:u.url)||S.Z.transparentPixel,alt:e.product.display_value,width:80,height:80,loader:S.Z.evaImageLoader})}),(0,r.jsxs)("div",{className:P().infoContainer,children:[(0,r.jsx)("p",{className:P().productName,children:e.product.display_value}),(0,r.jsxs)("div",{className:P().colorContainerWithChangeButton,children:[(0,r.jsxs)("div",{className:P().wrapperColor,children:[(0,r.jsx)(N(),{src:(null==p?void 0:p.url)||S.Z.transparentPixel,alt:(null==s?void 0:s.color)||"",width:12,height:12,className:P().colorImage,loader:S.Z.evaImageLoader}),(0,r.jsx)("p",{className:P().colorName,children:null==s?void 0:s.color})]}),(0,r.jsx)("button",{type:"button",className:P().buttonChange,onClick:()=>l(!c),children:n("generic.change")})]}),(0,r.jsx)(D.Z,{isOpen:c,title:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:P().actionsPaneSubTitle,children:null==s?void 0:s.color}),(0,r.jsx)("p",{className:P().actionsPaneTitle,children:n("generic.product_tiles.all_shades")})]}),customStyles:Z(),onClose:()=>l(!1),children:(0,r.jsx)(y.Z,{products:h,current:s,isGift:!0,onChange:()=>l(!0),onSelect:t=>{var o;null===(o=e.onSelect)||void 0===o||o.call(e,t.product_id),d(t.product_id),l(!1)},showColorList:!0})}),void 0!=e.onSelect&&(e.currentSelection===a?(0,r.jsxs)("div",{className:P().checked,children:[(0,r.jsx)("p",{children:n("generic.cart.selected_gift")}),(0,r.jsx)(b.Z,{name:"done",width:16,height:16})]}):(0,r.jsx)("button",{className:P().unchecked,onClick:()=>l(!0),children:(0,r.jsx)("p",{children:n("generic.cart.unselected_gift")})}))]})]})}function L(e){let t=(0,_.useTranslations)(),o=(0,g.F)(),n=(0,c.jD)(),{setPickProduct:l}=(0,c.jJ)(),{width:u}=(0,m.iP)(),f=u&&u>1280?4:3,C=a.PT.useGetState(a.SB.core.evaEndpointUrlState),N=a.PT.useCallService({service:d.QY.SearchProducts}),[S,w]=(0,i.useState)(0),[P,D]=(0,i.useState)(),[y,T]=(0,i.useState)(),Z=e.option.Tiers.find(e=>e.IsCurrentTier),L=null==Z?void 0:Z.Products,O=null==n?void 0:n.ShoppingCart.Lines.find(t=>"".concat(t.ID)==e.line),B=(0,s.a)({queryKey:["cart",null==n?void 0:n.ShoppingCart.ID,"pickProductBlock",e.line,"parents"],staleTime:3e5,queryFn:async()=>{var e,t;let o=new Set;for(let e of L)if("color"===e.logical_level){let t=k.Z.getProductParentId(e);t&&o.add(t)}let r=Array.from(o).length>0?await N({IncludedFields:["*"],Filters:{product_id:{Values:Array.from(o)}},PageSize:100}):void 0;return null!==(t=null==r?void 0:null===(e=r.Products)||void 0===e?void 0:e.map(e=>{let t=L.filter(t=>k.Z.getProductParentId(t)===e.product_id);return{...e,children:t}}))&&void 0!==t?t:[]},enabled:!!C&&L&&L.length>0}),R=(0,i.useMemo)(()=>{if(!L||!B.data)return null;let e=[];for(let t of L)if("color"===t.logical_level){let o=k.Z.getProductParentId(t),r=B.data.find(e=>e.product_id===o);o&&r&&!e.find(e=>e.product_id===Number(o))&&e.push(r)}else e.push(t);return e},[L,B.data]);async function F(t){return await l({payload:{OrderLineID:+e.line,Selection:t}})}if((0,i.useEffect)(()=>{Z&&!e.option.CurrentSelection&&l({payload:{OrderLineID:+e.line,Selection:e.option.Options[0]}})},[Z,e.option.CurrentSelection,e.option.Options,e.line,l]),!Z||!R||0===R.length)return null;let E=[];for(let e=0;e<R.length;e+=f){let t=R.slice(e,e+f);E.push(t)}return(0,r.jsxs)("div",{className:j().container,children:[(0,r.jsxs)("div",{className:j().textContainer,children:[(0,r.jsx)("p",{className:j().title,children:(null==O?void 0:O.Description)||Z.Description}),(0,r.jsx)("p",{className:j().subtitle,children:t("generic.giftedProductsDesc")})]}),(0,r.jsx)(v.tq,{modules:[h.Qr],onSwiper:t=>{D(t);let o=Math.floor(R.findIndex(t=>t.children?!!t.children.find(t=>t.product_id===e.currentSelection):t.product_id===e.currentSelection)/f);-1!==o&&(t.activeIndex=o)},controller:{control:y},grabCursor:!0,slidesPerView:1,spaceBetween:12,speed:x.Z.SWIPER_TRANSITION_DURATION,onTransitionEnd:e=>w(e.activeIndex),children:E.map((t,o)=>(0,r.jsx)(v.o5,{className:p()(j().productsContainer,o>0?j().setProductRows:void 0),children:t.map(t=>t&&"object"==typeof t&&"children"in t&&Array.isArray(t.children)?(0,r.jsx)(A,{product:t,currentSelection:e.currentSelection,onSelect:F},t.product_id+"_"+e.currentSelection):(0,r.jsx)(I,{product:t,currentSelection:e.currentSelection,onSelect:F},t.product_id))},"products group "+o))}),E.length>1&&(0,r.jsxs)("div",{className:j().bulletsContainer,children:[(0,r.jsx)(v.tq,{modules:[h.Qr],onSwiper:T,grabCursor:!0,slidesPerView:2===E.length?2:3,centeredSlides:!0,centeredSlidesBounds:!0,className:j().wrapperBullets,style:{width:2===E.length?100:150},onSetTranslate:(e,t)=>{E.length>3&&("rtl"===o?t<50:t>-50)&&(e.wrapperEl.style.transform="translate3d(0px, 0px, 0px)")},speed:x.Z.SWIPER_TRANSITION_DURATION,children:E.map((e,o)=>(0,r.jsx)(v.o5,{className:j().bulletSlide,children:(0,r.jsx)("button",{onClick:()=>{null==P||P.slideTo(o)},"aria-label":t.rich("a11y.goToSlide",{number:o+1}),className:p()(j().bullet,o===S?j().bulletActive:void 0),children:(0,r.jsx)("span",{className:j().bulletNumber,children:o+1})})},"bullet "+o))}),(0,r.jsxs)("div",{className:p()(j().arrowsContainer),children:[(0,r.jsx)("button",{className:j().arrowL,disabled:null==P?void 0:P.isBeginning,onClick:()=>null==P?void 0:P.slidePrev(),"aria-label":t("a11y.previousSlide"),children:(0,r.jsx)(b.Z,{name:"chevron-left",width:14,height:14})}),(0,r.jsx)("button",{className:j().arrowR,disabled:null==P?void 0:P.isEnd,onClick:()=>null==P?void 0:P.slideNext(),"aria-label":t("a11y.nextSlide"),children:(0,r.jsx)(b.Z,{name:"chevron-right",width:14,height:14})})]}),E.length>3&&(0,r.jsxs)("div",{className:p()(j().doublearrowsContainer),children:[(0,r.jsx)("button",{className:j().arrowL,disabled:null==P?void 0:P.isBeginning,onClick:()=>null==P?void 0:P.slideTo(0),"aria-label":t("a11y.goToFirstSlide"),children:(0,r.jsx)(b.Z,{name:"double-chevron-down",width:14,height:14,className:"rtl"===o?j().rotateDoubleArrowIconRTL:j().rotateDoubleArrowIcon})}),(0,r.jsx)("button",{className:j().arrowR,disabled:null==P?void 0:P.isEnd,onClick:()=>null==P?void 0:P.slideTo(E.length-1),"aria-label":t("a11y.goToLastSlide"),children:(0,r.jsx)(b.Z,{name:"double-chevron-up",width:14,height:14,className:"rtl"===o?j().rotateDoubleArrowIconRTL:j().rotateDoubleArrowIcon})})]})]})]})}var O=o(7462),B=o.n(O);function R(e){var t,o;let a=(0,c.jD)(),{serverSideProps:d}=(0,n.d)(),s=d.contentUtils;(0,l.hG)(s,"contentUtils");let u=s.fields.hidePickProductPromotionAtCheckout;if(!(null==a?void 0:null===(t=a.AdditionalOrderData)||void 0===t?void 0:t.DiscountPickProductOptions))return null;let p=Object.entries(a.AdditionalOrderData.DiscountPickProductOptions).sort((e,t)=>{let[o]=e,[r]=t;return o.localeCompare(r)}),_=[];return e.inCheckout&&0===(_=p.map(e=>{var t;let[o]=e,r=null==a?void 0:null===(t=a.ShoppingCart.Lines.find(e=>"".concat(e.ID)==o))||void 0===t?void 0:t.DiscountBackendID;return!!r&&!!u&&u.includes(r)})).filter(e=>!e).length&&(null===(o=e.onClose)||void 0===o||o.call(e)),(0,r.jsx)("div",{className:B().container,children:p.map((t,o)=>{var n,c;let[l,d]=t,s=null===(c=a.AdditionalOrderData)||void 0===c?void 0:null===(n=c.DiscountPickProductOptions)||void 0===n?void 0:n[+l],u=null==s?void 0:s.CurrentSelection;return e.inCheckout&&_[o]?(0,r.jsx)(i.Fragment,{},l):(0,r.jsx)(L,{line:l,option:d,currentSelection:u},l)})})}},10979:function(e,t,o){"use strict";o.d(t,{Z:function(){return p}});var r=o(85893),i=o(81501),n=o(5646),c=o(36492),l=o(60062),a=o(7299),d=o(37923),s=o(35108),u=o.n(s);function p(e){var t;let o=d.Z.usePriceFormatter(),{configuration:s}=(0,l.mX)(),p=null!==(t=e.currency)&&void 0!==t?t:null==s?void 0:s.CurrencyID,_=(0,a.jD)(),h=i.PT.useGetState(i.SB.core.evaEndpointUrlState),v=i.PT.useCallService({service:n.QY.PrefigureDiscounts}),{data:m}=(0,c.a)({queryKey:["prefiguredDiscounts",e.orderId],staleTime:1/0,queryFn:async()=>await v({OrderID:e.orderId}),enabled:!!h&&!!e.orderId}),g=e.lines.map(t=>{var o,r;let i=e.orderId?null==m?void 0:m.Results:null==_?void 0:null===(o=_.AdditionalOrderData)||void 0===o?void 0:o.PrefiguredDiscounts,n=i&&i.length>0?null===(r=i.find(e=>e.DiscountID===t.DiscountID))||void 0===r?void 0:r.MarketingDescription:void 0;return{discount:t,description:n||t.Discount.Description}});return(0,r.jsx)(r.Fragment,{children:g.map(e=>(0,r.jsxs)("div",{className:u().row,children:[(0,r.jsx)("p",{className:u().rowTitle,children:e.description}),(0,r.jsx)("p",{className:u().rowValue,children:o.currency(e.discount.Total,{currency:p})})]},e.discount.DiscountID))})}},36619:function(e,t,o){"use strict";o.d(t,{Z:function(){return k}});var r=o(85893),i=o(94184),n=o.n(i),c=o(51526),l=o(74595),a=o(25675),d=o.n(a),s=o(14640),u=o(98136),p=o(59334),_=o(37923),h=o(89700),v=o(65550),m=o(30524),g=o.n(m);function x(e){var t;let{product:o,isSelected:i=!1,onSelect:c,children:l,isGift:a}=e,s=v.Z.getProductDroplet(null==o?void 0:null===(t=o.product_media)||void 0===t?void 0:t.media);return(0,r.jsxs)("button",{className:n()(g().color,i&&g().activeColor,o.has_stock||a?void 0:g().outOfStock),onClick:()=>c(o),children:[(0,r.jsx)("div",{className:g().imageContainer,children:(0,r.jsx)(d(),{alt:o.color||"",src:(null==s?void 0:s.url)||p.Z.transparentPixel,width:20,height:20,loader:p.Z.evaImageLoader})}),l]},o.product_id)}function k(e){let{current:t,products:o,onSelect:i,onChange:a,showColorList:d,isGift:p=!1}=e,v=(0,s.useTranslations)(),m=_.Z.usePriceFormatter();return(0,r.jsx)(c.M,{children:(0,r.jsx)(l.E.div,{initial:u.P.off,animate:u.P.on,exit:u.P.off,className:n()(g().content,{[g().singleColor]:!d}),children:d?null==o?void 0:o.map(e=>(0,r.jsxs)(x,{product:e,isGift:p,isSelected:!!h.Z.deepEqual(t,e),onSelect:()=>i(e),children:[(0,r.jsx)("p",{className:g().colorName,children:e.color}),(0,r.jsx)("p",{className:g().price,children:m.currency(e.display_price,{currency:e.currency_id})})]},e.product_id)):(0,r.jsxs)(x,{product:t,onSelect:()=>a(),isGift:p,isSelected:!0,children:[(0,r.jsx)("p",{className:g().colorName,children:t.color}),(0,r.jsx)("p",{className:g().changeButton,children:v("generic.changecount",{count:o.length})})]},t.product_id)})},"listenabled-".concat(d))}},50679:function(e,t,o){"use strict";o.d(t,{y:function(){return n}});var r=o(50542),i=o(66530);function n(){let{serverSideProps:e}=(0,i.d)();return function(t,o){return(0,r.E)(t.split("."))(e.messages)||o||t}}o(77477),o(89700)},67118:function(e){e.exports={container:"cart-pick-product-block_container__Hh88H",textContainer:"cart-pick-product-block_textContainer__dUAZm",headline:"cart-pick-product-block_headline__5Xi8T",title:"cart-pick-product-block_title__oBcUA",subtitle:"cart-pick-product-block_subtitle__rcaxS",productsContainer:"cart-pick-product-block_productsContainer__TCxhh",setProductRows:"cart-pick-product-block_setProductRows__gP3dV",bulletsContainer:"cart-pick-product-block_bulletsContainer__YJghp",wrapperBullets:"cart-pick-product-block_wrapperBullets__3UhOO",bulletSlide:"cart-pick-product-block_bulletSlide__egzi4",bullet:"cart-pick-product-block_bullet__nLL8u",bulletActive:"cart-pick-product-block_bulletActive__Mx33d",bulletNumber:"cart-pick-product-block_bulletNumber__6FfYv",arrowsContainer:"cart-pick-product-block_arrowsContainer__sbk5V",doublearrowsContainer:"cart-pick-product-block_doublearrowsContainer__GmzdN",arrowL:"cart-pick-product-block_arrowL__UVfbM",arrowR:"cart-pick-product-block_arrowR__dW8J6",rotateDoubleArrowIcon:"cart-pick-product-block_rotateDoubleArrowIcon__ZQ6di",rotateDoubleArrowIconRTL:"cart-pick-product-block_rotateDoubleArrowIconRTL__maXQK"}},73622:function(e){e.exports={container:"cart-pick-product-option_container__u3rBq",imageContainer:"cart-pick-product-option_imageContainer__wYqS0",infoContainer:"cart-pick-product-option_infoContainer__s_row",productName:"cart-pick-product-option_productName__7LtT5",colorImage:"cart-pick-product-option_colorImage__moNX7",colorName:"cart-pick-product-option_colorName__fGXHy",colorContainer:"cart-pick-product-option_colorContainer__2Fxq5",colorContainerWithChangeButton:"cart-pick-product-option_colorContainerWithChangeButton__zMMJL",wrapperColor:"cart-pick-product-option_wrapperColor__G7pPs",buttonChange:"cart-pick-product-option_buttonChange__yWj0p",checked:"cart-pick-product-option_checked__wOIX1",unchecked:"cart-pick-product-option_unchecked__cFQWW",actionsPaneTitle:"cart-pick-product-option_actionsPaneTitle__nfjKz",actionsPaneSubTitle:"cart-pick-product-option_actionsPaneSubTitle__0C7kP"}},7462:function(e){e.exports={container:"cart-pick-product-section_container__0aoyi"}},35108:function(e){e.exports={row:"discount-lines-totals_row__YVmcL",rowTitle:"discount-lines-totals_rowTitle__59f0Y",rowValue:"discount-lines-totals_rowValue__BJERn"}},30524:function(e){e.exports={content:"product-colors-dialog_content__c4vjK",singleColor:"product-colors-dialog_singleColor__tfsKc",color:"product-colors-dialog_color__WmvoJ",outOfStock:"product-colors-dialog_outOfStock__OZhfH",imageContainer:"product-colors-dialog_imageContainer__l4UFj",activeColor:"product-colors-dialog_activeColor__8LayG",colorName:"product-colors-dialog_colorName__Ah78H",notifyMe:"product-colors-dialog_notifyMe__uHzVR",price:"product-colors-dialog_price__zZ43l",changeButton:"product-colors-dialog_changeButton__RDf2F"}},5017:function(e){e.exports={panel:"product-tile-dialog-desktop_panel__jNfi_",header:"product-tile-dialog-desktop_header__P0KSE",top:"product-tile-dialog-desktop_top__iphjL",title:"product-tile-dialog-desktop_title__QBn_L",content:"product-tile-dialog-desktop_content__mWuPN",notifyMeContainer:"product-tile-dialog-desktop_notifyMeContainer__s02Mx",wrapper:"product-tile-dialog-desktop_wrapper__PQ_pa"}}}]);
//# sourceMappingURL=98394-e640dbddb22c1d85.js.map