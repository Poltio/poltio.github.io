function _toConsumableArray(o){return _arrayWithoutHoles(o)||_iterableToArray(o)||_unsupportedIterableToArray(o)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,t){var r;if(o)return"string"==typeof o?_arrayLikeToArray(o,t):"Map"===(r="Object"===(r={}.toString.call(o).slice(8,-1))&&o.constructor?o.constructor.name:r)||"Set"===r?Array.from(o):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(o,t):void 0}function _iterableToArray(o){if("undefined"!=typeof Symbol&&null!=o[Symbol.iterator]||null!=o["@@iterator"])return Array.from(o)}function _arrayWithoutHoles(o){if(Array.isArray(o))return _arrayLikeToArray(o)}function _arrayLikeToArray(o,t){(null==t||t>o.length)&&(t=o.length);for(var r=0,a=Array(t);r<t;r++)a[r]=o[r];return a}window.smeg=window.smeg||{};var STORAGE_KEY="SKU_comparison_storage_".concat(window.smeg.locale),$comparatorSkuContainer=$(".comparator-sku-container"),$comparatorContainer=$(".comparator-container"),$comparatorCheckbox=$(".product-comparison-checkbox"),$showDifferentAttributeCheckbox=$(".show-different-attributes-comparison-checkbox"),$comparisonRowToHide=$(".comparison-row-to-hide"),$categoryLinkContainer=$(".category-link"),$categoryRemoveProductContainer=$(".remove-product");function goToComparator(){var o=window.smeg.comparisonBaseUrl,t=[];$(".comparator-sku-element").each(function(){t.push($(this).attr("data-sku-comparator"))}),window.location.href=o+("?SKUs="+t)}function addToStorage(o){var t=localStorage.getItem(STORAGE_KEY);(t=t?t.split(","):[]).length<3&&(t.push(o),localStorage.setItem(STORAGE_KEY,t.toString()),manageComparatorBannerVisibility()),o&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"selezione-prodotto-confronto",productCompared:o}))}function removeAllSkus(){for(var o=(o=localStorage.getItem(STORAGE_KEY))?o.split(","):[],t=0;t<o.length;t++)removeFromStorage(o[t])}function removeFromStorage(o){var t=localStorage.getItem(STORAGE_KEY),o=(t=t?t.split(","):[]).indexOf(o);-1<o&&t.splice(o,1),localStorage.setItem(STORAGE_KEY,t.toString()),manageComparatorBannerVisibility()}function manageComparatorBannerVisibility(){var t,o,r,a,e=localStorage.getItem(STORAGE_KEY),e=e?e.split(","):[],n=($comparatorCheckbox.filter(function(){return-1<$.inArray($(this).data("sku"),e)}).prop("checked",!0),$comparatorCheckbox.filter(function(){return-1===$.inArray($(this).data("sku"),e)}).prop("checked",!1),$categoryRemoveProductContainer.data("label"));$comparatorSkuContainer.html("".concat(e.map(function(o){return t=o.split("|"),' <div class="comparator-sku-element" data-sku-comparator="'.concat(t[0],'"><button type="button" aria-label="').concat(n,'" onclick="removeFromStorage(\'').concat(o,'\')"/><div class="comparator-img"><img src="').concat(t[1],'" alt=""/></div><div class="comparator-sku">').concat(t[0],"</div></div>")}).join(""))),e&&e[0]&&(r=e[0].split("|"))[2]&&r[3]&&(o=r[2],r=r[3],a=$categoryLinkContainer.data("label"),$categoryLinkContainer.html('<a href="'.concat(r,'">').concat(a," ").concat(o,"</a>"))),e&&0!==e.length?($comparatorContainer.is(":visible")||(setComparatorBottomOffset(0),window.addEventListener("scroll",handleStickyComparatorWhenScrolling)),$comparatorContainer.show()):($comparatorContainer.hide(),window.removeEventListener("scroll",handleStickyComparatorWhenScrolling)),3===e.length?$("input.product-comparison-checkbox:checkbox:not(:checked)").prop("disabled",!0):$("input.product-comparison-checkbox:checkbox:not(:checked)").prop("disabled",!1),2<=e.length?$(".btn-comparator").removeAttr("disabled"):$(".btn-comparator").attr("disabled",!0),3===e.length?($(".comparator-msg-first").addClass("hidden"),$(".comparator-msg-second").addClass("hidden"),$categoryLinkContainer.addClass("hidden")):1===e.length?($(".comparator-msg-first").removeClass("hidden"),$(".comparator-msg-second").addClass("hidden"),$categoryLinkContainer.removeClass("hidden")):2===e.length&&($(".comparator-msg-first").addClass("hidden"),$(".comparator-msg-second").removeClass("hidden"),$categoryLinkContainer.removeClass("hidden"))}function setComparatorBottomOffset(o){$comparatorContainer.css("bottom",o+"px")}function handleStickyComparatorWhenScrolling(){var o=$(document).height()-$(".footer").outerHeight(),o=$(document).scrollTop()+$(window).height()-o;setComparatorBottomOffset(0<o?o:0)}function onComparatorCheckboxChange(o){var t=$(o).data("sku");(o.checked?addToStorage:removeFromStorage)(t)}function activeSubTable(o){var t;o&&(t="#".concat(o),t=document.querySelector(t).parentElement.classList,o=_toConsumableArray(document.querySelectorAll("tr[data-target='".concat(o,"']"))),t.contains("active")?(t.remove("active"),o.forEach(function(o){return o.classList.add("d-none")})):(t.add("active"),o.forEach(function(o){return o.classList.remove("d-none")})))}function initSubTable(){_toConsumableArray(document.querySelectorAll(".js_subTable-header")).map(function(o){o.addEventListener("click",function(o){activeSubTable(null==o||null==(o=o.target)?void 0:o.id)})})}function reduceComparator(){var o=$(".comparator-header"),t=$(".comparator-container"),r=t.height()+115,a=t.height(),e=o.height()+20;o.on("click",function(){e=(a=a===(e=e<20?60:e)?(t.animate({height:r}),r):(t.animate({height:e}),e),o.height()+20)}),o.on("keydown",function(o){"Enter"===o.key&&$(this).click()})}$(document).ready(function(){$comparatorCheckbox.change(function(){onComparatorCheckboxChange(this)}),$showDifferentAttributeCheckbox.change(function(){this.checked?$comparisonRowToHide.attr("style","display:none !important"):$comparisonRowToHide.css("display","")}),manageComparatorBannerVisibility(),initSubTable(),reduceComparator()});
//# sourceMappingURL=products-comparator.min.js.map