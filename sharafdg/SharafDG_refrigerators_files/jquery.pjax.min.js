!function(t){function e(e,r,a){var i=this;return this.on("click.pjax",e,function(e){var o=t.extend({},m(r,a));o.container||(o.container=t(this).attr("data-pjax")||i),n(e,o)})}function n(e,n,r){r=m(n,r);var i=e.currentTarget;if("A"!==i.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol!==i.protocol||location.hostname!==i.hostname||i.href.indexOf("#")>-1&&h(i)==h(location)||e.isDefaultPrevented())){var o={url:i.href,container:t(i).attr("data-pjax"),target:i},c=t.extend({},o,r),s=t.Event("pjax:click");t(i).trigger(s,[c]),s.isDefaultPrevented()||(a(c),e.preventDefault(),t(i).trigger("pjax:clicked",[c])),e.preventDefault()}}function r(e,n,r){r=m(n,r);var i=e.currentTarget,o=t(i);if("FORM"!==i.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var c={type:(o.attr("method")||"GET").toUpperCase(),url:o.attr("action"),container:o.attr("data-pjax"),target:i};if("GET"!==c.type&&void 0!==window.FormData)c.data=new FormData(i),c.processData=!1,c.contentType=!1;else{if(t(i).find(":file").length)return;c.data=t(i).serializeArray()}a(t.extend({},c,r)),e.preventDefault()}function a(e){function n(e,n,a){a||(a={}),a.relatedTarget=r;var i=t.Event(e,a);return c.trigger(i,n),!i.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,a.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var r=e.target,i=f(e.url).hash,c=e.context=v(e.container);e.data||(e.data={}),t.isArray(e.data)?(console.log(c.attr("id")),e.data.push({name:"_pjax",value:c.attr("id")})):e.data._pjax=c.attr("id");var s;e.beforeSend=function(t,r){if("GET"!==r.type&&(r.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",c.attr("id")),!n("pjax:beforeSend",[t,r]))return!1;r.timeout>0&&(s=setTimeout(function(){n("pjax:timeout",[t,e])&&t.abort("timeout")},r.timeout),r.timeout=0);var a=f(r.url);i&&(a.hash=i),e.requestUrl=d(a)},e.complete=function(t,r){s&&clearTimeout(s),n("pjax:complete",[t,r,e]),n("pjax:end",[t,e])},e.error=function(t,r,a){var i=j("",t,e),c=n("pjax:error",[t,r,a,e]);"GET"==e.type&&"abort"!==r&&c&&o(i.url)},e.success=function(r,s,u){var p=a.state,d="function"==typeof t.pjax.defaults.version?t.pjax.defaults.version():t.pjax.defaults.version,h=u.getResponseHeader("X-PJAX-Version"),m=j(r,u,e),v=f(m.url);if(i&&(v.hash=i,m.url=v.href),d&&h&&d!==h)return void o(m.url);if(!m.contents)return void o(m.url);if(a.state={id:e.id||l(),url:m.url,title:m.title,container:c.selector,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(a.state,m.title,m.url),t.contains(e.container,document.activeElement))try{document.activeElement.blur()}catch(t){}m.title&&(document.title=m.title),n("pjax:beforeReplace",[m.contents,e],{state:a.state,previousState:p}),c.html(m.contents);var x=c.find("input[autofocus], textarea[autofocus]").last()[0];x&&document.activeElement!==x&&x.focus(),y(m.scripts);var g=e.scrollTo;if(i){var w=decodeURIComponent(i.slice(1)),b=document.getElementById(w)||document.getElementsByName(w)[0];b&&(g=t(b).offset().top)}"number"==typeof g&&t(window).scrollTop(g),n("pjax:success",[r,s,u,e])},a.state||(a.state={id:l(),url:window.location.href,title:document.title,container:c.selector,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(a.state,document.title)),u(a.xhr),a.options=e;var h=a.xhr=t.ajax(e);return h.readyState>0&&(e.push&&!e.replace&&(w(a.state.id,p(c)),window.history.pushState(null,"",e.requestUrl)),n("pjax:start",[h,e]),n("pjax:send",[h,e])),a.xhr}function i(e,n){var r={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return a(t.extend(r,m(e,n)))}function o(t){window.history.replaceState(null,"",a.state.url),window.location.replace(t)}function c(e){C||u(a.xhr);var n,r=a.state,i=e.state;if(i&&i.container){if(C&&A==i.url)return;if(r){if(r.id===i.id)return;n=r.id<i.id?"forward":"back"}var c=R[i.id]||[],s=t(c[0]||i.container),l=c[1];if(s.length){r&&b(n,r.id,p(s));var d=t.Event("pjax:popstate",{state:i,direction:n});s.trigger(d);var f={id:i.id,url:i.url,container:s,push:!1,fragment:i.fragment,timeout:i.timeout,scrollTo:!1};if(l){s.trigger("pjax:start",[null,f]),a.state=i,i.title&&(document.title=i.title);var h=t.Event("pjax:beforeReplace",{state:i,previousState:r});s.trigger(h,[l,f]),s.html(l),s.trigger("pjax:end",[null,f])}else a(f);s[0].offsetHeight}else o(location.href)}C=!1}function s(e){var n=t.isFunction(e.url)?e.url():e.url,r=e.type?e.type.toUpperCase():"GET",a=t("<form>",{method:"GET"===r?"GET":"POST",action:n,style:"display:none"});"GET"!==r&&"POST"!==r&&a.append(t("<input>",{type:"hidden",name:"_method",value:r.toLowerCase()}));var i=e.data;if("string"==typeof i)t.each(i.split("&"),function(e,n){var r=n.split("=");a.append(t("<input>",{type:"hidden",name:r[0],value:r[1]}))});else if(t.isArray(i))t.each(i,function(e,n){a.append(t("<input>",{type:"hidden",name:n.name,value:n.value}))});else if("object"==typeof i){var o;for(o in i)a.append(t("<input>",{type:"hidden",name:o,value:i[o]}))}t(document.body).append(a),a.submit()}function u(e){e&&e.readyState<4&&(e.onreadystatechange=t.noop,e.abort())}function l(){return(new Date).getTime()}function p(t){var e=t.clone();return e.find("script").each(function(){this.src||jQuery._data(this,"globalEval",!1)}),[t.selector,e.contents()]}function d(t){return t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,""),t.href.replace(/\?($|#)/,"$1")}function f(t){var e=document.createElement("a");return e.href=t,e}function h(t){return t.href.replace(/#.*/,"")}function m(e,n){return e&&n?n.container=e:n=t.isPlainObject(e)?e:{container:e},n.container&&(n.container=v(n.container)),n}function v(e){if(e=t(e),e.length){if(""!==e.selector&&e.context===document)return e;if(e.attr("id"))return t("#"+e.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+e.selector}function x(t,e){return t.filter(e).add(t.find(e))}function g(e){return t.parseHTML(e,document,!0)}function j(e,n,r){var a={},i=/<html/i.test(e),o=n.getResponseHeader("X-PJAX-URL");if(a.url=o?d(f(o)):r.requestUrl,i)var c=t(g(e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),s=t(g(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var c=s=t(g(e));if(0===s.length)return a;if(a.title=x(c,"title").last().text(),r.fragment){if("body"===r.fragment)var u=s;else var u=x(s,r.fragment).first();u.length&&(a.contents="body"===r.fragment?u:u.contents(),a.title||(a.title=u.attr("title")||u.data("title")))}else i||(a.contents=s);return a.contents&&(a.contents=a.contents.not(function(){return t(this).is("title")}),a.contents.find("title").remove(),a.scripts=x(a.contents,"script[src]").remove(),a.contents=a.contents.not(a.scripts)),a.title&&(a.title=t.trim(a.title)),a}function y(e){if(e){var n=t("script[src]");e.each(function(){var e=this.src;if(!n.filter(function(){return this.src===e}).length){var r=document.createElement("script"),a=t(this).attr("type");a&&(r.type=a),r.src=t(this).attr("src"),document.head.appendChild(r)}})}}function w(t,e){R[t]=e,X.push(t),T(U,0),T(X,a.defaults.maxCacheLength)}function b(t,e,n){var r,i;R[e]=n,"forward"===t?(r=X,i=U):(r=U,i=X),r.push(e),(e=i.pop())&&delete R[e],T(r,a.defaults.maxCacheLength)}function T(t,e){for(;t.length>e;)delete R[t.shift()]}function E(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-PJAX-VERSION"===e.toUpperCase()}).attr("content")}function S(){t.fn.pjax=e,t.pjax=a,t.pjax.enable=t.noop,t.pjax.disable=P,t.pjax.click=n,t.pjax.submit=r,t.pjax.reload=i,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:E},t(window).on("popstate.pjax",c)}function P(){t.fn.pjax=function(){return this},t.pjax=s,t.pjax.enable=S,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",c)}var C=!0,A=window.location.href,D=window.history.state;D&&D.container&&(a.state=D),"state"in window.history&&(C=!1);var R={},U=[],X=[];void 0!==t.event.props&&t.inArray("state",t.event.props)<0&&t.event.props.push("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),t.support.pjax?S():P()}(jQuery);